!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],b):b(a["@uirouter/angularjs"]=a["@uirouter/angularjs"]||{},a.angular)}(this,function(a,b){"use strict";function c(a){function b(c){return c.length>=d?a.apply(null,c):function(){return b(c.concat([].slice.apply(arguments)))}}var c=[].slice.apply(arguments,[1]),d=a.length;return b(c)}function d(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return d.apply(null,[].slice.call(arguments).reverse())}function f(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(null,c)&&b.apply(null,c)}}function g(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(null,c)||b.apply(null,c)}}function h(a,b){return function(c){return c[a].apply(c,b)}}function i(a){return function(b){for(var c=0;c<a.length;c++)if(a[c][0](b))return a[c][1](b)}}function j(a){if(ab(a)&&a.length){var b=a.slice(0,-1),c=a.slice(-1);return!(b.filter(Ka($a)).length||c.filter(Ka(Ya)).length)}return Ya(a)}function k(a){return a}function l(){}function m(a,b,c,d,e){void 0===e&&(e=!1);var f=function(b){return a()[b].bind(c())},g=function(a){return function(){return b[a]=f(a),b[a].apply(null,arguments)}};return d=d||Object.keys(a()),d.reduce(function(a,b){return a[b]=e?g(b):f(b),a},b)}function n(a,b){return-1!==a.indexOf(b)}function o(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),a}function p(a,b){return a.push(b),b}function q(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=b.concat({}).reverse(),e=nb.apply(null,d);return nb({},e,s(a||{},Object.keys(e)))}function r(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function s(a,b){var c={};for(var d in a)-1!==b.indexOf(d)&&(c[d]=a[d]);return c}function t(a,b){return Object.keys(a).filter(Ka(qb(b))).reduce(function(b,c){return b[c]=a[c],b},{})}function u(a,b){return x(a,Ha(b))}function v(a,b){var c=ab(a),d=c?[]:{},e=c?function(a){return d.push(a)}:function(a,b){return d[b]=a};return mb(a,function(a,c){b(a,c)&&e(a,c)}),d}function w(a,b){var c;return mb(a,function(a,d){c||b(a,d)&&(c=a)}),c}function x(a,b){var c=ab(a)?[]:{};return mb(a,function(a,d){return c[d]=b(a,d)}),c}function y(a,b){return a.push(b),a}function z(a,b){return void 0===b&&(b="assert failure"),function(c){var d=a(c);if(!d)throw new Error(Ya(b)?b(c):b);return d}}function A(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(0===a.length)return[];var c,d=a.reduce(function(a,b){return Math.min(b.length,a)},9007199254740991),e=[];for(c=0;d>c;c++)switch(a.length){case 1:e.push([a[0][c]]);break;case 2:e.push([a[0][c],a[1][c]]);break;case 3:e.push([a[0][c],a[1][c],a[2][c]]);break;case 4:e.push([a[0][c],a[1][c],a[2][c],a[3][c]]);break;default:e.push(a.map(function(a){return a[c]}))}return e}function B(a,b){var c,d;if(ab(b)&&(c=b[0],d=b[1]),!$a(c))throw new Error("invalid parameters to applyPairs");return a[c]=d,a}function C(a){return a.length&&a[a.length-1]||void 0}function D(a,b){return b&&Object.keys(b).forEach(function(a){return delete b[a]}),b||(b={}),nb(b,a)}function E(a,b,c){return ab(a)?a.forEach(b,c):void Object.keys(a).forEach(function(c){return b(a[c],c)})}function F(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d=Object.keys(c),e=0;e<d.length;e++)a[d[e]]=c[d[e]]}return a}function G(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a;if(c!==typeof b||"object"!==c)return!1;var d=[a,b];if(La(ab)(d))return H(a,b);if(La(bb)(d))return a.getTime()===b.getTime();if(La(cb)(d))return a.toString()===b.toString();if(La(Ya)(d))return!0;if([Ya,ab,bb,cb].map(Ma).reduce(function(a,b){return a||!!b(d)},!1))return!1;var e,f={};for(e in a){if(!G(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f[e])return!1;return!0}function H(a,b){return a.length===b.length&&A(a,b).reduce(function(a,b){return a&&G(b[0],b[1])},!0)}function I(a){return a?"[ui-view#"+a.id+" tag in template from '"+(a.creationContext&&a.creationContext.name||"(root)")+"' state]: fqn: '"+a.fqn+"', name: '"+a.name+"@"+a.creationContext+"')":"ui-view (defunct)"}function J(b){return Za(b)?a.Category[b]:a.Category[a.Category[b]]}function K(a,b){function c(a){for(var b=d,c=0;c<b.length;c++){var e=new Qa(b[c]);if(e&&e.matches(a.name)||!e&&b[c]===a.name)return!0}return!1}var d=$a(b)?[b]:b;return!!(Ya(d)?d:c)(a)}function L(a,b,c){function d(a,d,e){void 0===e&&(e={});var g=new Xb(b,c,d,a,e);return f.push(g),function(){g._deregistered=!0,rb(f)(g)}}var e=a._registeredHooks=a._registeredHooks||{},f=e[c.name]=[];return a[c.name]=d,d}function M(a){return void 0===a&&(a=!1),function(b,c){var d=a?-1:1,e=(b.node.state.path.length-c.node.state.path.length)*d;return 0!==e?e:c.hook.priority-b.hook.priority}}function N(a,b){function c(a){return ab(a)?a:Va(a)?[a]:[]}function d(a){switch(a.length){case 0:return;case 1:return"auto"===b?a[0]:a;default:return a}}function e(a,b){return function(e){if(ab(e)&&0===e.length)return e;var f=c(e),g=x(f,a);return!0===b?0===v(g,function(a){return!a}).length:d(g)}}function f(a){return function(b,d){var e=c(b),f=c(d);if(e.length!==f.length)return!1;for(var g=0;g<e.length;g++)if(!a(e[g],f[g]))return!1;return!0}}var g=this;["encode","decode","equals","$normalize"].forEach(function(b){var c=a[b].bind(a),d="equals"===b?f:e;g[b]=d(c)}),nb(this,{dynamic:a.dynamic,name:a.name,pattern:a.pattern,inherit:a.inherit,is:e(a.is.bind(a),!0),$arrayMode:b})}function O(a){function b(){return a.value}return a=_b(a)&&{value:a}||a,b.__cacheable=!0,nb(a,{$$fn:j(a.value)?a.value:b})}function P(b,c,d,e,f){if(b.type&&c&&"string"!==c.name)throw new Error("Param '"+e+"' has two type configurations.");if(b.type&&c&&"string"===c.name&&f.type(b.type))return f.type(b.type);if(c)return c;if(!b.type){var g=d===a.DefType.CONFIG?"any":d===a.DefType.PATH?"path":d===a.DefType.SEARCH?"query":"string";return f.type(g)}return b.type instanceof Zb?b.type:f.type(b.type)}function Q(a,b,c){var d=a.squash;if(!b||!1===d)return!1;if(!Va(d)||null==d)return c;if(!0===d||$a(d))return d;throw new Error("Invalid squash policy: '"+d+"'. Valid policies: false, true, or arbitrary string")}function R(a,b,c,d){var e,f,g=[{from:"",to:c||b?void 0:""},{from:null,to:c||b?void 0:""}];return e=ab(a.replace)?a.replace:[],$a(d)&&e.push({from:d,to:void 0}),f=x(e,Ha("from")),v(g,function(a){return-1===f.indexOf(a.from)}).concat(e)}function S(a,b){return b.length<=a?b:b.substr(0,a-3)+"..."}function T(a,b){for(;b.length<a;)b+=" ";return b}function U(a){return a.replace(/^([A-Z])/,function(a){return a.toLowerCase()}).replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function V(a){var b=W(a),c=b.match(/^(function [^ ]+\([^)]*\))/),d=c?c[1]:b,e=a.name||"";return e&&d.match(/function \(/)?"function "+e+d.substr(9):d}function W(a){var b=ab(a)?a.slice(-1)[0]:a;return b&&b.toString()||"undefined"}function X(a){function b(a){if(_a(a)){if(-1!==c.indexOf(a))return"[circular ref]";c.push(a)}return pc(a)}var c=[];return JSON.stringify(a,function(a,c){return b(c)}).replace(/\\"/g,'"')}function Y(a){var b=new RegExp("("+a+")","g");return function(a){return a.split(b).filter(k)}}function Z(a,b){return $a(C(a))&&$a(b)?a.slice(0,-1).concat(C(a)+b):y(a,b)}function $(a){return a.name}function _(a){return a.self.$$state=function(){return a},a.self}function aa(a){return a.parent&&a.parent.data&&(a.data=a.self.data=pb(a.parent.data,a.data)),a.data}function ba(a){return a.parent?a.parent.path.concat(a):[a]}function ca(a){var b=a.parent?nb({},a.parent.includes):{};return b[a.name]=!0,b}function da(a){var b=function(a){var b=gb.$injector;return a.$inject||b&&b.annotate(a,b.strictDi)||"deferred"},c=function(a){return!(!a.token||!a.resolveFn)},d=function(a){return!(!a.provide&&!a.token||!(a.useValue||a.useFactory||a.useExisting||a.useClass))},f=function(a){return!!(a&&a.val&&($a(a.val)||ab(a.val)||Ya(a.val)))},g=function(a){return a.provide||a.token},h=i([[Ha("resolveFn"),function(a){return new ec(g(a),a.resolveFn,a.deps,a.policy)}],[Ha("useFactory"),function(a){return new ec(g(a),a.useFactory,a.deps||a.dependencies,a.policy)}],[Ha("useClass"),function(a){return new ec(g(a),function(){return new a.useClass},[],a.policy)}],[Ha("useValue"),function(a){return new ec(g(a),function(){return a.useValue},[],a.policy,a.useValue)}],[Ha("useExisting"),function(a){return new ec(g(a),k,[a.useExisting],a.policy)}]]),j=i([[e(Ha("val"),$a),function(a){return new ec(a.token,k,[a.val],a.policy)}],[e(Ha("val"),ab),function(a){return new ec(a.token,C(a.val),a.val.slice(0,-1),a.policy)}],[e(Ha("val"),Ya),function(a){return new ec(a.token,a.val,b(a.val),a.policy)}]]),l=i([[Na(ec),function(a){return a}],[c,h],[d,h],[f,j],[Pa(!0),function(a){throw new Error("Invalid resolve value: "+X(a))}]]),m=a.resolve;return(ab(m)?m:function(a,b){return Object.keys(a||{}).map(function(c){return{token:c,val:a[c],deps:void 0,policy:b[c]}})}(m,a.resolvePolicy||{})).map(l)}function ea(a,b){var c=["",""],d=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return d;switch(b.squash){case!1:c=["(",")"+(b.isOptional?"?":"")];break;case!0:d=d.replace(/\/$/,""),c=["(?:/(",")|/)?"];break;default:c=["("+b.squash+"|",")?"]}return d+c[0]+b.type.pattern.source+c[1]}function fa(a,b,c,d){return"/"===d?a:b?d.slice(0,-1)+a:c?d.slice(1)+a:a}function ga(a){if(!(Ya(a)||$a(a)||Na(Ub)(a)||Ub.isDef(a)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Ya(a)?a:Pa(a)}function ha(a){a.addResolvable({token:Uc,deps:[],resolveFn:function(){return a.router},data:a.router},""),a.addResolvable({token:nc,deps:[],resolveFn:function(){return a},data:a},""),a.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return a},data:a},""),a.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return a.params()},data:a.params()},""),a.entering().forEach(function(b){a.addResolvable({token:"$state$",deps:[],resolveFn:function(){return b},data:b},b)})}function ia(a){return function(b,c){return c.$$state()[a](b,c)}}function ja(a,b){function c(b){return b&&Array.isArray(b.states)&&b.states.forEach(function(b){return a.router.stateRegistry.register(b)}),b}var d=b.$$state().lazyLoad,e=d._promise;if(!e){var f=function(a){return delete b.lazyLoad,delete b.$$state().lazyLoad,delete d._promise,a},g=function(a){return delete d._promise,gb.$q.reject(a)};e=d._promise=gb.$q.when(d(a,b)).then(c).then(f,g)}return e}function ka(a){var b=a._ignoredReason();if(b){Tb.traceTransitionIgnored(a);var c=a.router.globals.transition;return"SameAsCurrent"===b&&c&&c.abort(),Nb.ignored().toPromise()}}function la(a){if(!a.valid())throw new Error(a.error())}function ma(a){var b=function(a){return a||""},c=Ad(a).map(b),d=c[0],e=c[1],f=Bd(d).map(b);return{path:f[0],search:f[1],hash:e,url:a}}function na(a,b,c,d){return function(e){function f(a){a.dispose(g),a.dispose(h)}var g=e.locationService=new c(e),h=e.locationConfig=new d(e,b);return{name:a,service:g,configuration:h,dispose:f}}}function oa(a){return gb.$injector=yd,gb.$q=wd,{name:"vanilla.services",$q:wd,$injector:yd,dispose:function(){return null}}}function pa(){var a=null;return function(b,c){return a=a||gb.$injector.get("$templateFactory"),[new Zd(b,c,a)]}}function qa(a){if(!a.parent)return{};var b=["templateProvider","templateUrl","template","notify","async"],c=["controller","controllerProvider","controllerAs","resolveAs"],d=["component","bindings","componentProvider"],e=b.concat(c),f=d.concat(e);if(Va(a.views)&&Xd(f,a))throw new Error("State '"+a.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+f.filter(function(b){return Va(a[b])}).join(", "));var g={},h=a.views||{$default:s(a,f)};return mb(h,function(b,c){if(c=c||"$default",$a(b)&&(b={component:b}),b=nb({},b),Xd(d,b)&&Xd(e,b))throw new Error("Cannot combine: "+d.join("|")+" with: "+e.join("|")+" in stateview: '"+c+"@"+a.name+"'");b.resolveAs=b.resolveAs||"$resolve",b.$type="ng1",b.$context=a,b.$name=c;var f=Kc.normalizeUIViewTarget(b.$context,b.$name);b.$uiViewName=f.uiViewName,b.$uiViewContextAnchor=f.uiViewContextAnchor,g[c]=b}),g}function ra(a){var b=gb.$injector.get(a+"Directive");if(!b||!b.length)throw new Error("Unable to find component named '"+a+"'");return b.map(_d).reduce(zb,[])}function sa(a){function b(a,b,d,e,f,g){return c._runtimeServices(e,a,d,b),delete ke.router,delete ke.$get,ke}ke=this.router=new Uc,ke.stateProvider=new be(ke.stateRegistry,ke.stateService),ke.stateRegistry.decorator("views",qa),ke.stateRegistry.decorator("onExit",ce("onExit")),ke.stateRegistry.decorator("onRetain",ce("onRetain")),ke.stateRegistry.decorator("onEnter",ce("onEnter")),ke.viewService._pluginapi._viewConfigFactory("ng1",pa());var c=ke.locationService=ke.locationConfig=new de(a);return de.monkeyPatchPathParameterType(ke),ke.router=ke,ke.$get=b,b.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],ke}function ta(a,b,c){gb.$injector=a,gb.$q=b,c.stateRegistry.get().map(function(a){return a.$$state().resolvables}).reduce(zb,[]).filter(function(a){return"deferred"===a.deps}).forEach(function(b){return b.deps=a.annotate(b.resolveFn)})}function ua(a){a.$watch(function(){Tb.approximateDigests++})}function va(a){var b,c=a.match(/^\s*({[^}]*})\s*$/);if(c&&(a="("+c[1]+")"),!(b=a.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1]||null,paramExpr:b[3]||null}}function wa(a){var b=a.parent().inheritedData("$uiView"),c=Ja("$cfg.path")(b);return c?C(c).state.name:void 0}function xa(a,b,c){var d=c.uiState||a.current.name,e=nb(Aa(b,a),c.uiStateOpts||{}),f=a.href(d,c.uiStateParams,e);return{uiState:d,uiStateParams:c.uiStateParams,uiStateOpts:e,href:f}}function ya(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function za(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.uiState,h.uiStateParams,h.uiStateOpts)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function Aa(a,b){return{relative:wa(a)||b.$current,inherit:!0,source:"sref"}}function Ba(a,b,c,d){var e;d&&(e=d.events),ab(e)||(e=["click"]);for(var f=a.on?"on":"bind",g=0,h=e;g<h.length;g++){var i=h[g];a[f](i,c)}b.$on("$destroy",function(){for(var b=a.off?"off":"unbind",d=0,f=e;d<f.length;d++){var g=f[d];a[b](g,c)}})}function Ca(a){var b=function(b,c,d){return a.is(b,c,d)};return b.$stateful=!0,b}function Da(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}function Ea(a,c,d,e,f,g){var h=Ja("viewDecl.controllerAs"),i=Ja("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(e){var g=e.html();return e.empty(),function(e,j){var k=j.data("$uiView");if(!k)return j.html(g),void a(j.contents())(e);var l=k.$cfg||{viewDecl:{},getTemplate:b.noop},m=l.path&&new kc(l.path);j.html(l.getTemplate(j,m)||g),Tb.traceUIViewFill(k.$uiView,j.html());var n=a(j.contents()),o=l.controller,p=h(l),q=i(l),r=m&&pe(m);if(e[q]=r,o){var s=c(o,nb({},r,{$scope:e,$element:j}));p&&(e[p]=s,e[p][q]=r),j.data("$ngControllerController",s),j.children().data("$ngControllerController",s),Fa(f,d,s,e,l)}if($a(l.viewDecl.component))var t=l.viewDecl.component,u=U(t),v=new RegExp("^(x-|data-)?"+u+"$","i"),w=function(){var a=[].slice.call(j[0].children).filter(function(a){return a&&a.tagName&&v.exec(a.tagName)});return a&&Wd.element(a).data("$"+t+"Controller")},x=e.$watch(w,function(a){a&&(Fa(f,d,a,e,l),x())});n(e)}}}}function Fa(a,b,c,d,e){!Ya(c.$onInit)||e.viewDecl.component&&te||c.$onInit();var f=C(e.path).state.self,g={bind:c};if(Ya(c.uiOnParamsChanged)){var h=new kc(e.path),i=h.getResolvable("$transition$").data,j=function(a){if(a!==i&&-1===a.exiting().indexOf(f)){var b=a.params("to"),d=a.params("from"),e=a.treeChanges().to.map(function(a){return a.paramSchema}).reduce(zb,[]),g=a.treeChanges().from.map(function(a){return a.paramSchema}).reduce(zb,[]),h=e.filter(function(a){var c=g.indexOf(a);return-1===c||!g[c].type.equals(b[a.id],d[a.id])});if(h.length){var j=h.map(function(a){return a.id}),k=v(b,function(a,b){return-1!==j.indexOf(b)});c.uiOnParamsChanged(k,a)}}};d.$on("$destroy",b.onSuccess({},j,g))}if(Ya(c.uiCanExit)){var k=ue++,l=function(a){return!!a&&(a._uiCanExitIds&&!0===a._uiCanExitIds[k]||l(a.redirectedFrom()))},m=function(b){var d,e=b._uiCanExitIds=b._uiCanExitIds||{};return l(b)||(d=a.when(c.uiCanExit(b)),d.then(function(a){return e[k]=!1!==a})),d},n={exiting:f.name};d.$on("$destroy",b.onBefore(n,m,g))}}function Ga(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}ua.$inject=["t"];var Ha=function(a){return function(b){return b&&b[a]}},Ia=c(function(a,b,c){return c&&c[a]===b}),Ja=function(a){return e.apply(null,a.split(".").map(Ha))},Ka=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,b)}},La=function(a){return function(b){return b.reduce(function(b,c){return b&&!!a(c)},!0)}},Ma=function(a){return function(b){return b.reduce(function(b,c){return b||!!a(c)},!1)}},Na=function(a){return function(b){return null!=b&&b.constructor===a||b instanceof a}},Oa=function(a){return function(b){return a===b}},Pa=function(a){return function(){return a}},Qa=function(){function a(a){this.text=a,this.glob=a.split(".");var b=this.text.split(".").map(function(a){return"**"===a?"(?:|(?:\\.[^.]*)*)":"*"===a?"\\.[^.]*":"\\."+a}).join("");this.regexp=new RegExp("^"+b+"$")}return a.prototype.matches=function(a){return this.regexp.test("."+a)},a.is=function(a){return!!/[!,*]+/.exec(a)},a.fromString=function(b){return a.is(b)?new a(b):null},a}(),Ra=function(){function a(b){return a.create(b||{})}return a.create=function(b){b=a.isStateClass(b)?new b:b;var c=pb(pb(b,a.prototype));return b.$$state=function(){return c},c.self=b,c.__stateObjectCache={nameGlob:Qa.fromString(c.name)},c},a.prototype.is=function(a){return this===a||this.self===a||this.fqn()===a},a.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var a=this.parent.fqn();return a?a+"."+this.name:this.name},a.prototype.root=function(){return this.parent&&this.parent.root()||this},a.prototype.parameters=function(a){return a=q(a,{inherit:!0,matchingKeys:null}),(a.inherit&&this.parent&&this.parent.parameters()||[]).concat(wb(this.params)).filter(function(b){return!a.matchingKeys||a.matchingKeys.hasOwnProperty(b.id)})},a.prototype.parameter=function(a,b){return void 0===b&&(b={}),this.url&&this.url.parameter(a,b)||w(wb(this.params),Ia("id",a))||b.inherit&&this.parent&&this.parent.parameter(a)},a.prototype.toString=function(){return this.fqn()},a}();Ra.isStateClass=function(a){return Ya(a)&&!0===a.__uiRouterState},Ra.isState=function(a){return _a(a.__stateObjectCache)};var Sa=Object.prototype.toString,Ta=function(a){return function(b){return typeof b===a}},Ua=Ta("undefined"),Va=Ka(Ua),Wa=function(a){return null===a},Xa=g(Wa,Ua),Ya=Ta("function"),Za=Ta("number"),$a=Ta("string"),_a=function(a){return null!==a&&"object"==typeof a},ab=Array.isArray,bb=function(a){return"[object Date]"===Sa.call(a)},cb=function(a){return"[object RegExp]"===Sa.call(a)},db=Ra.isState,eb=f(_a,e(Ha("then"),Ya)),fb=function(a){return function(){throw new Error(a+"(): No coreservices implementation for UI-Router is loaded.")}},gb={$q:void 0,$injector:void 0},hb="undefined"==typeof window?{}:window,ib=hb.angular||{},jb=ib.fromJson||JSON.parse.bind(JSON),kb=ib.toJson||JSON.stringify.bind(JSON),lb=ib.copy||D,mb=ib.forEach||E,nb=Object.assign||F,ob=ib.equals||G,pb=function(a,b){return nb(Object.create(a),b)},qb=c(n),rb=c(o),sb=c(p),tb=function(a){return a.slice().forEach(function(b){"function"==typeof b&&b(),rb(a,b)})},ub=function(a,b){return nb(a,b)},vb=x,wb=function(a){return Object.keys(a).map(function(b){return a[b]})},xb=function(a,b){return a&&b},yb=function(a,b){return a||b},zb=function(a,b){return a.concat(b)},Ab=function(a,b){return ab(b)?a.concat(b.reduce(Ab,[])):y(a,b)},Bb=function(a,b){return qb(a,b)?a:y(a,b)},Cb=function(a){return a.reduce(zb,[])},Db=function(a){return a.reduce(Ab,[])},Eb=z,Fb=z,Gb=function(a){return Object.keys(a).map(function(b){return[b,a[b]]})},Hb=function(a,b){return void 0===b&&(b=Pa(!0)),function(c,d){return b(c)&&b(d)?a(c)-a(d):0}},Ib=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(b,c){return a.reduce(function(a,d){return a||d(b,c)},0)}},Jb=function(a){return a["catch"](function(a){return 0})&&a},Kb=function(a){return Jb(gb.$q.reject(a))},Lb=function(){function a(a,b){void 0===a&&(a=[]),void 0===b&&(b=null),this._items=a,this._limit=b}return a.prototype.enqueue=function(a){var b=this._items;return b.push(a),this._limit&&b.length>this._limit&&b.shift(),a},a.prototype.dequeue=function(){return this.size()?this._items.splice(0,1)[0]:void 0},a.prototype.clear=function(){var a=this._items;return this._items=[],a},a.prototype.size=function(){return this._items.length},a.prototype.remove=function(a){var b=this._items.indexOf(a);return b>-1&&this._items.splice(b,1)[0]},a.prototype.peekTail=function(){return this._items[this._items.length-1]},a.prototype.peekHead=function(){return this.size()?this._items[0]:void 0},a}();!function(a){a[a.SUPERSEDED=2]="SUPERSEDED",a[a.ABORTED=3]="ABORTED",a[a.INVALID=4]="INVALID",a[a.IGNORED=5]="IGNORED",a[a.ERROR=6]="ERROR"}(a.RejectType||(a.RejectType={}));var Mb=0,Nb=function(){function b(a,b,c){this.$id=Mb++,this.type=a,this.message=b,this.detail=c}return b.prototype.toString=function(){var a=function(a){return a&&a.toString!==Object.prototype.toString?a.toString():X(a)}(this.detail),b=this;return"Transition Rejection($id: "+b.$id+" type: "+b.type+", message: "+b.message+", detail: "+a+")"},b.prototype.toPromise=function(){return nb(Kb(this),{_transitionRejection:this})},b.isRejectionPromise=function(a){return a&&"function"==typeof a.then&&Na(b)(a._transitionRejection)},b.superseded=function(c,d){var e=new b(a.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",c);return d&&d.redirected&&(e.redirected=!0),e},b.redirected=function(a){return b.superseded(a,{redirected:!0})},b.invalid=function(c){return new b(a.RejectType.INVALID,"This transition is invalid",c)},b.ignored=function(c){return new b(a.RejectType.IGNORED,"The transition was ignored",c)},b.aborted=function(c){return new b(a.RejectType.ABORTED,"The transition has been aborted",c)},b.errored=function(c){return new b(a.RejectType.ERROR,"The transition errored",c)},b.normalize=function(a){return Na(b)(a)?a:b.errored(a)},b}(),Ob=function(a){return"[ViewConfig#"+a.$id+" from '"+(a.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+a.viewDecl.$uiViewName+"@"+a.viewDecl.$uiViewContextAnchor+"'"};!function(a){a[a.RESOLVE=0]="RESOLVE",a[a.TRANSITION=1]="TRANSITION",a[a.HOOK=2]="HOOK",a[a.UIVIEW=3]="UIVIEW",a[a.VIEWCONFIG=4]="VIEWCONFIG"}(a.Category||(a.Category={}));var Pb=Ja("$id"),Qb=Ja("router.$id"),Rb=function(a){return"Transition #"+Pb(a)+"-"+Qb(a)},Sb=function(){function b(){this._enabled={},this.approximateDigests=0}return b.prototype._set=function(b,c){var d=this;c.length||(c=Object.keys(a.Category).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}).map(function(b){return a.Category[b]})),c.map(J).forEach(function(a){return d._enabled[a]=b})},b.prototype.enable=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._set(!0,a)},b.prototype.disable=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._set(!1,a)},b.prototype.enabled=function(a){return!!this._enabled[J(a)]},b.prototype.traceTransitionStart=function(b){this.enabled(a.Category.TRANSITION)&&console.log(Rb(b)+": Started  -> "+X(b))},b.prototype.traceTransitionIgnored=function(b){this.enabled(a.Category.TRANSITION)&&console.log(Rb(b)+": Ignored  <> "+X(b))},b.prototype.traceHookInvocation=function(b,c,d){if(this.enabled(a.Category.HOOK)){var e=Ja("traceData.hookType")(d)||"internal",f=Ja("traceData.context.state.name")(d)||Ja("traceData.context")(d)||"unknown",g=V(b.registeredHook.callback);console.log(Rb(c)+":   Hook -> "+e+" context: "+f+", "+S(200,g))}},b.prototype.traceHookResult=function(b,c,d){this.enabled(a.Category.HOOK)&&console.log(Rb(c)+":   <- Hook returned: "+S(200,X(b)))},b.prototype.traceResolvePath=function(b,c,d){this.enabled(a.Category.RESOLVE)&&console.log(Rb(d)+":         Resolving "+b+" ("+c+")")},b.prototype.traceResolvableResolved=function(b,c){this.enabled(a.Category.RESOLVE)&&console.log(Rb(c)+":               <- Resolved  "+b+" to: "+S(200,X(b.data)))},b.prototype.traceError=function(b,c){this.enabled(a.Category.TRANSITION)&&console.log(Rb(c)+": <- Rejected "+X(c)+", reason: "+b)},b.prototype.traceSuccess=function(b,c){this.enabled(a.Category.TRANSITION)&&console.log(Rb(c)+": <- Success  "+X(c)+", final state: "+b.name)},b.prototype.traceUIViewEvent=function(b,c,d){void 0===d&&(d=""),this.enabled(a.Category.UIVIEW)&&console.log("ui-view: "+T(30,b)+" "+I(c)+d)},b.prototype.traceUIViewConfigUpdated=function(b,c){this.enabled(a.Category.UIVIEW)&&this.traceUIViewEvent("Updating",b," with ViewConfig from context='"+c+"'")},b.prototype.traceUIViewFill=function(b,c){this.enabled(a.Category.UIVIEW)&&this.traceUIViewEvent("Fill",b," with: "+S(200,c))},b.prototype.traceViewServiceEvent=function(b,c){this.enabled(a.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+b+" "+Ob(c))},b.prototype.traceViewServiceUIViewEvent=function(b,c){this.enabled(a.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+b+" "+I(c))},b}(),Tb=new Sb;!function(a){a[a.CREATE=0]="CREATE",a[a.BEFORE=1]="BEFORE",a[a.RUN=2]="RUN",a[a.SUCCESS=3]="SUCCESS",a[a.ERROR=4]="ERROR"}(a.TransitionHookPhase||(a.TransitionHookPhase={})),function(a){a[a.TRANSITION=0]="TRANSITION",a[a.STATE=1]="STATE"}(a.TransitionHookScope||(a.TransitionHookScope={}));var Ub=function(){function a(a,b,c,d){void 0===d&&(d={}),this._identifier=a,this._definition=b,this._options=d,this._params=c||{}}return a.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},a.prototype.identifier=function(){return this._identifier},a.prototype.params=function(){return this._params},a.prototype.$state=function(){return this._definition},a.prototype.state=function(){return this._definition&&this._definition.self},a.prototype.options=function(){return this._options},a.prototype.exists=function(){return!(!this._definition||!this._definition.self)},a.prototype.valid=function(){return!this.error()},a.prototype.error=function(){var a=this.options().relative;if(!this._definition&&a){var b=a.name?a.name:a;return"Could not resolve '"+this.name()+"' from state '"+b+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},a.prototype.toString=function(){return"'"+this.name()+"'"+kb(this.params())},a}();Ub.isDef=function(a){return a&&a.state&&($a(a.state)||$a(a.state.name))};var Vb={current:l,transition:null,traceData:{},bind:null},Wb=function(){function b(b,c,d,e){var f=this;this.transition=b,this.stateContext=c,this.registeredHook=d,this.options=e,this.isSuperseded=function(){return f.type.hookPhase===a.TransitionHookPhase.RUN&&!f.options.transition.isActive()},this.options=q(e,Vb),this.type=d.eventType}return b.prototype.logError=function(a){this.transition.router.stateService.defaultErrorHandler()(a)},b.prototype.invokeHook=function(){var a=this,b=this.registeredHook;if(!b._deregistered){var c=this.getNotCurrentRejection();if(c)return c;var d=this.options;Tb.traceHookInvocation(this,this.transition,d);var e=function(a){return Nb.normalize(a).toPromise()},f=function(c){return b.eventType.getErrorHandler(a)(c)},g=function(c){return b.eventType.getResultHandler(a)(c)};try{var h=function(){return b.callback.call(d.bind,a.transition,a.stateContext)}();return!this.type.synchronous&&eb(h)?h["catch"](e).then(g,f):g(h)}catch(a){return f(Nb.normalize(a))}}},b.prototype.handleHookResult=function(a){var b=this,c=this.getNotCurrentRejection();return c||(eb(a)?a.then(function(a){return b.handleHookResult(a)}):(Tb.traceHookResult(a,this.transition,this.options),!1===a?Nb.aborted("Hook aborted transition").toPromise():Na(Ub)(a)?Nb.redirected(a).toPromise():void 0))},b.prototype.getNotCurrentRejection=function(){var a=this.transition.router;return a._disposed?Nb.aborted("UIRouter instance #"+a.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Nb.aborted().toPromise():this.isSuperseded()?Nb.superseded(this.options.current()).toPromise():void 0},b.prototype.toString=function(){var a=this,b=a.options,c=a.registeredHook;return(Ja("traceData.hookType")(b)||"internal")+" context: "+(Ja("traceData.context.state.name")(b)||Ja("traceData.context")(b)||"unknown")+", "+S(200,W(c.callback))},b.chain=function(a,b){var c=function(a,b){return a.then(function(){return b.invokeHook()})};return a.reduce(c,b||gb.$q.when())},b.invokeHooks=function(a,c){for(var d=0;d<a.length;d++){var e=a[d].invokeHook();if(eb(e)){var f=a.slice(d+1);return b.chain(f,e).then(c)}}return c()},b.runAllHooks=function(a){a.forEach(function(a){return a.invokeHook()})},b}();Wb.HANDLE_RESULT=function(a){return function(b){return a.handleHookResult(b)}},Wb.LOG_REJECTED_RESULT=function(a){return function(b){eb(b)&&b["catch"](function(b){return a.logError(Nb.normalize(b))})}},Wb.LOG_ERROR=function(a){return function(b){return a.logError(b)}},Wb.REJECT_ERROR=function(a){return function(a){return Kb(a)}},Wb.THROW_ERROR=function(a){return function(a){throw a}};var Xb=function(){function b(a,b,c,d,e){void 0===e&&(e={}),this.tranSvc=a,this.eventType=b,this.callback=c,this.matchCriteria=d,this.priority=e.priority||0,this.bind=e.bind||null,this._deregistered=!1}return b.prototype._matchingNodes=function(a,b){if(!0===b)return a;var c=a.filter(function(a){return K(a.state,b)});return c.length?c:null},b.prototype._getDefaultMatchCriteria=function(){return x(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},b.prototype._getMatchingNodes=function(b){var c=this,d=nb(this._getDefaultMatchCriteria(),this.matchCriteria);return wb(this.tranSvc._pluginapi._getPathTypes()).reduce(function(e,f){var g=f.scope===a.TransitionHookScope.STATE,h=b[f.name]||[],i=g?h:[C(h)];return e[f.name]=c._matchingNodes(i,d[f.name]),e},{})},b.prototype.matches=function(a){var b=this._getMatchingNodes(a);return wb(b).every(k)?b:null},b}(),Yb=function(){function b(a){this.transition=a}return b.prototype.buildHooksForPhase=function(a){var b=this;return this.transition.router.transitionService._pluginapi._getEvents(a).map(function(a){return b.buildHooks(a)}).reduce(zb,[]).filter(k)},b.prototype.buildHooks=function(b){var c=this.transition,d=c.treeChanges(),e=this.getMatchingHooks(b,d);if(!e)return[];var f={transition:c,current:c.options().current},g=function(e){return e.matches(d)[b.criteriaMatchPath.name].map(function(d){var g=nb({bind:e.bind,traceData:{hookType:b.name,context:d}},f),h=b.criteriaMatchPath.scope===a.TransitionHookScope.STATE?d.state.self:null,i=new Wb(c,h,e,g);return{hook:e,node:d,transitionHook:i}})};return e.map(g).reduce(zb,[]).sort(M(b.reverseSort)).map(function(a){return a.transitionHook})},b.prototype.getMatchingHooks=function(b,c){var d=b.hookPhase===a.TransitionHookPhase.CREATE,e=this.transition.router.transitionService;
return(d?[e]:[this.transition,e]).map(function(a){return a.getHooks(b.name)}).filter(Eb(ab,"broken event named: "+b.name)).reduce(zb,[]).filter(function(a){return a.matches(c)})},b}(),Zb=function(){function a(a){this.pattern=/.*/,this.inherit=!0,nb(this,a)}return a.prototype.is=function(a,b){return!0},a.prototype.encode=function(a,b){return a},a.prototype.decode=function(a,b){return a},a.prototype.equals=function(a,b){return a==b},a.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},a.prototype.toString=function(){return"{ParamType:"+this.name+"}"},a.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},a.prototype.$asArray=function(a,b){if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new N(this,a)},a}(),$b=Object.prototype.hasOwnProperty,_b=function(a){return 0===["value","type","squash","array","dynamic"].filter($b.bind(a||{})).length};!function(a){a[a.PATH=0]="PATH",a[a.SEARCH=1]="SEARCH",a[a.CONFIG=2]="CONFIG"}(a.DefType||(a.DefType={}));var ac=function(){function b(b,c,d,e,f){d=O(d),c=P(d,c,e,b,f.paramTypes);var g=function(){var c={array:e===a.DefType.SEARCH&&"auto"},f=b.match(/\[\]$/)?{array:!0}:{};return nb(c,f,d).array}();c=g?c.$asArray(g,e===a.DefType.SEARCH):c;var h=void 0!==d.value||e===a.DefType.SEARCH,i=Va(d.dynamic)?!!d.dynamic:!!c.dynamic,j=Va(d.raw)?!!d.raw:!!c.raw,k=Q(d,h,f.defaultSquashPolicy()),l=R(d,g,h,k),m=Va(d.inherit)?!!d.inherit:!!c.inherit;nb(this,{id:b,type:c,location:e,isOptional:h,dynamic:i,raw:j,squash:k,replace:l,inherit:m,array:g,config:d})}return b.prototype.isDefaultValue=function(a){return this.isOptional&&this.type.equals(this.value(),a)},b.prototype.value=function(a){var b=this;return a=function(a){for(var c=0,d=b.replace;c<d.length;c++){var e=d[c];if(e.from===a)return e.to}return a}(a),Ua(a)?function(){if(b._defaultValueCache)return b._defaultValueCache.defaultValue;if(!gb.$injector)throw new Error("Injectable functions cannot be called at configuration time");var a=gb.$injector.invoke(b.config.$$fn);if(null!==a&&void 0!==a&&!b.type.is(a))throw new Error("Default value ("+a+") for parameter '"+b.id+"' is not an instance of ParamType ("+b.type.name+")");return b.config.$$fn.__cacheable&&(b._defaultValueCache={defaultValue:a}),a}():this.type.$normalize(a)},b.prototype.isSearch=function(){return this.location===a.DefType.SEARCH},b.prototype.validates=function(a){if((Ua(a)||null===a)&&this.isOptional)return!0;var b=this.type.$normalize(a);if(!this.type.is(b))return!1;var c=this.type.encode(b);return!($a(c)&&!this.type.pattern.exec(c))},b.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},b.values=function(a,b){void 0===b&&(b={});for(var c={},d=0,e=a;d<e.length;d++){var f=e[d];c[f.id]=f.value(b[f.id])}return c},b.changed=function(a,b,c){return void 0===b&&(b={}),void 0===c&&(c={}),a.filter(function(a){return!a.type.equals(b[a.id],c[a.id])})},b.equals=function(a,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),0===b.changed(a,c,d).length},b.validates=function(a,b){return void 0===b&&(b={}),a.map(function(a){return a.validates(b[a.id])}).reduce(xb,!0)},b}(),bc=function(){function a(b){if(b instanceof a){var c=b;this.state=c.state,this.paramSchema=c.paramSchema.slice(),this.paramValues=nb({},c.paramValues),this.resolvables=c.resolvables.slice(),this.views=c.views&&c.views.slice()}else{var d=b;this.state=d,this.paramSchema=d.parameters({inherit:!1}),this.paramValues={},this.resolvables=d.resolvables.map(function(a){return a.clone()})}}return a.prototype.applyRawParams=function(a){var b=function(b){return[b.id,b.value(a[b.id])]};return this.paramValues=this.paramSchema.reduce(function(a,c){return B(a,b(c))},{}),this},a.prototype.parameter=function(a){return w(this.paramSchema,Ia("id",a))},a.prototype.equals=function(a,b){var c=this.diff(a,b);return c&&0===c.length},a.prototype.diff=function(a,b){if(this.state!==a.state)return!1;var c=b?b(this):this.paramSchema;return ac.changed(c,this.paramValues,a.paramValues)},a.clone=function(b){return new a(b)},a}(),cc=function(){function a(){}return a.makeTargetState=function(a){var b=C(a).state;return new Ub(b,b,a.map(Ha("paramValues")).reduce(ub,{}))},a.buildPath=function(a){var b=a.params();return a.$state().path.map(function(a){return new bc(a).applyRawParams(b)})},a.buildToPath=function(b,c){var d=a.buildPath(c);return c.options().inherit?a.inheritParams(b,d,Object.keys(c.params())):d},a.applyViewConfigs=function(b,c,d){c.filter(function(a){return qb(d,a.state)}).forEach(function(d){var e=wb(d.state.views||{}),f=a.subPath(c,function(a){return a===d}),g=e.map(function(a){return b.createViewConfig(f,a)});d.views=g.reduce(zb,[])})},a.inheritParams=function(a,b,c){function d(a,b){var c=w(a,Ia("state",b));return nb({},c&&c.paramValues)}function e(b){var e=nb({},b&&b.paramValues),g=s(e,c);e=t(e,c);var h=t(d(a,b.state)||{},f),i=nb(e,h,g);return new bc(b.state).applyRawParams(i)}void 0===c&&(c=[]);var f=a.map(function(a){return a.paramSchema}).reduce(zb,[]).filter(function(a){return!a.inherit}).map(Ha("id"));return b.map(e)},a.treeChanges=function(b,c,d){function e(a,b){var d=bc.clone(a);return d.paramValues=c[b].paramValues,d}for(var f=0,g=Math.min(b.length,c.length);g>f&&b[f].state!==d&&function(b,c){return b.equals(c,a.nonDynamicParams)}(b[f],c[f]);)f++;var h,i,j,k,l;h=b,i=h.slice(0,f),j=h.slice(f);var m=i.map(e);return k=c.slice(f),l=m.concat(k),{from:h,to:l,retained:i,exiting:j,entering:k}},a.matching=function(a,b,c){var d=!1;return A(a,b).reduce(function(a,b){var e=b[0],f=b[1];return d=d||!e.equals(f,c),d?a:a.concat(e)},[])},a.equals=function(b,c,d){return b.length===c.length&&a.matching(b,c,d).length===b.length},a.subPath=function(a,b){var c=w(a,b),d=a.indexOf(c);return-1===d?void 0:a.slice(0,d+1)},a}();cc.nonDynamicParams=function(a){return a.state.parameters({inherit:!1}).filter(function(a){return!a.dynamic})},cc.paramValues=function(a){return a.reduce(function(a,b){return nb(a,b.paramValues)},{})};var dc={when:"LAZY",async:"WAIT"},ec=function(){function a(b,c,d,e,f){if(this.resolved=!1,this.promise=void 0,b instanceof a)nb(this,b);else if(Ya(c)){if(null==b||void 0==b)throw new Error("new Resolvable(): token argument is required");if(!Ya(c))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=b,this.policy=e,this.resolveFn=c,this.deps=d||[],this.data=f,this.resolved=void 0!==f,this.promise=this.resolved?gb.$q.when(this.data):void 0}else if(_a(b)&&b.token&&Ya(b.resolveFn)){var g=b;return new a(g.token,g.resolveFn,g.deps,g.policy,g.data)}}return a.prototype.getPolicy=function(a){var b=this.policy||{},c=a&&a.resolvePolicy||{};return{when:b.when||c.when||dc.when,async:b.async||c.async||dc.async}},a.prototype.resolve=function(a,b){var c=this,d=gb.$q,e=function(){return d.all(a.getDependencies(c).map(function(c){return c.get(a,b)}))},f=function(a){return c.resolveFn.apply(null,a)},g=function(a){var b=a.cache(1);return b.take(1).toPromise().then(function(){return b})},h=a.findNode(this),i=h&&h.state,j="RXWAIT"===this.getPolicy(i).async?g:k,l=function(a){return c.data=a,c.resolved=!0,Tb.traceResolvableResolved(c,b),c.data};return this.promise=d.when().then(e).then(f).then(j).then(l)},a.prototype.get=function(a,b){return this.promise||this.resolve(a,b)},a.prototype.toString=function(){return"Resolvable(token: "+X(this.token)+", requires: ["+this.deps.map(X)+"])"},a.prototype.clone=function(){return new a(this)},a}();ec.fromData=function(a,b){return new ec(a,function(){return b},null,null,b)};var fc={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},gc=fc.when,hc=[gc.EAGER,gc.LAZY],ic=[gc.EAGER],jc="Native Injector",kc=function(){function a(a){this._path=a}return a.prototype.getTokens=function(){return this._path.reduce(function(a,b){return a.concat(b.resolvables.map(function(a){return a.token}))},[]).reduce(Bb,[])},a.prototype.getResolvable=function(a){return C(this._path.map(function(a){return a.resolvables}).reduce(zb,[]).filter(function(b){return b.token===a}))},a.prototype.getPolicy=function(a){var b=this.findNode(a);return a.getPolicy(b.state)},a.prototype.subContext=function(b){return new a(cc.subPath(this._path,function(a){return a.state===b}))},a.prototype.addResolvables=function(a,b){var c=w(this._path,Ia("state",b)),d=a.map(function(a){return a.token});c.resolvables=c.resolvables.filter(function(a){return-1===d.indexOf(a.token)}).concat(a)},a.prototype.resolvePath=function(a,b){var c=this;void 0===a&&(a="LAZY");var d=qb(hc,a)?a:"LAZY",e=d===fc.when.EAGER?ic:hc;Tb.traceResolvePath(this._path,a,b);var f=function(a,b){return function(d){return qb(a,c.getPolicy(d)[b])}},g=this._path.reduce(function(a,d){var g=d.resolvables.filter(f(e,"when")),h=g.filter(f(["NOWAIT"],"async")),i=g.filter(Ka(f(["NOWAIT"],"async"))),j=c.subContext(d.state),k=function(a){return a.get(j,b).then(function(b){return{token:a.token,value:b}})};return h.forEach(k),a.concat(i.map(k))},[]);return gb.$q.all(g)},a.prototype.injector=function(){return this._injector||(this._injector=new lc(this))},a.prototype.findNode=function(a){return w(this._path,function(b){return qb(b.resolvables,a)})},a.prototype.getDependencies=function(a){var b=this,c=this.findNode(a),d=cc.subPath(this._path,function(a){return a===c})||this._path,e=d.reduce(function(a,b){return a.concat(b.resolvables)},[]).filter(function(b){return b!==a}),f=function(a){var c=e.filter(function(b){return b.token===a});if(c.length)return C(c);var d=b.injector().getNative(a);if(!d)throw new Error("Could not find Dependency Injection token: "+X(a));return new ec(a,function(){return d},[],d)};return a.deps.map(f)},a}(),lc=function(){function a(a){this.context=a,this["native"]=this.get(jc)||gb.$injector}return a.prototype.get=function(a){var b=this.context.getResolvable(a);if(b){if("NOWAIT"===this.context.getPolicy(b).async)return b.get(this.context);if(!b.resolved)throw new Error("Resolvable async .get() not complete:"+X(b.token));return b.data}return this["native"]&&this["native"].get(a)},a.prototype.getAsync=function(a){var b=this.context.getResolvable(a);return b?b.get(this.context):gb.$q.when(this["native"].get(a))},a.prototype.getNative=function(a){return this["native"]&&this["native"].get(a)},a}(),mc=Ha("self"),nc=function(){function b(b,c,d){var e=this;if(this._deferred=gb.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Yb(this),this.isActive=function(){return e.router.globals.transition===e},this.router=d,this._targetState=c,!c.valid())throw new Error(c.error());this._options=nb({current:Pa(this)},c.options()),this.$id=d.transitionService._transitionCount++;var f=cc.buildToPath(b,c);this._treeChanges=cc.treeChanges(b,f,this._options.reloadState),this.createTransitionHookRegFns();var g=this._hookBuilder.buildHooksForPhase(a.TransitionHookPhase.CREATE);Wb.invokeHooks(g,function(){return null}),this.applyViewConfigs(d)}return b.prototype.onBefore=function(a,b,c){},b.prototype.onStart=function(a,b,c){},b.prototype.onExit=function(a,b,c){},b.prototype.onRetain=function(a,b,c){},b.prototype.onEnter=function(a,b,c){},b.prototype.onFinish=function(a,b,c){},b.prototype.onSuccess=function(a,b,c){},b.prototype.onError=function(a,b,c){},b.prototype.createTransitionHookRegFns=function(){var b=this;this.router.transitionService._pluginapi._getEvents().filter(function(b){return b.hookPhase!==a.TransitionHookPhase.CREATE}).forEach(function(a){return L(b,b.router.transitionService,a)})},b.prototype.getHooks=function(a){return this._registeredHooks[a]},b.prototype.applyViewConfigs=function(a){var b=this._treeChanges.entering.map(function(a){return a.state});cc.applyViewConfigs(a.transitionService.$view,this._treeChanges.to,b)},b.prototype.$from=function(){return C(this._treeChanges.from).state},b.prototype.$to=function(){return C(this._treeChanges.to).state},b.prototype.from=function(){return this.$from().self},b.prototype.to=function(){return this.$to().self},b.prototype.targetState=function(){return this._targetState},b.prototype.is=function(a){return a instanceof b?this.is({to:a.$to().name,from:a.$from().name}):!(a.to&&!K(this.$to(),a.to)||a.from&&!K(this.$from(),a.from))},b.prototype.params=function(a){return void 0===a&&(a="to"),Object.freeze(this._treeChanges[a].map(Ha("paramValues")).reduce(ub,{}))},b.prototype.injector=function(a,b){void 0===b&&(b="to");var c=this._treeChanges[b];return a&&(c=cc.subPath(c,function(b){return b.state===a||b.state.name===a})),new kc(c).injector()},b.prototype.getResolveTokens=function(a){return void 0===a&&(a="to"),new kc(this._treeChanges[a]).getTokens()},b.prototype.addResolvable=function(a,b){void 0===b&&(b=""),a=Na(ec)(a)?a:new ec(a);var c="string"==typeof b?b:b.name,d=this._treeChanges.to,e=w(d,function(a){return a.state.name===c});new kc(d).addResolvables([a],e.state)},b.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},b.prototype.originalTransition=function(){var a=this.redirectedFrom();return a&&a.originalTransition()||this},b.prototype.options=function(){return this._options},b.prototype.entering=function(){return x(this._treeChanges.entering,Ha("state")).map(mc)},b.prototype.exiting=function(){return x(this._treeChanges.exiting,Ha("state")).map(mc).reverse()},b.prototype.retained=function(){return x(this._treeChanges.retained,Ha("state")).map(mc)},b.prototype.views=function(a,b){void 0===a&&(a="entering");var c=this._treeChanges[a];return c=b?c.filter(Ia("state",b)):c,c.map(Ha("views")).filter(k).reduce(zb,[])},b.prototype.treeChanges=function(a){return a?this._treeChanges[a]:this._treeChanges},b.prototype.redirect=function(a){for(var b=1,c=this;null!=(c=c.redirectedFrom());)if(++b>20)throw new Error("Too many consecutive Transition redirects (20+)");var d={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==a.options().location&&(d.location="replace");var e=nb({},this.options(),a.options(),d);a=new Ub(a.identifier(),a.$state(),a.params(),e);var f=this.router.transitionService.create(this._treeChanges.from,a),g=this._treeChanges.entering,h=f._treeChanges.entering;return cc.matching(h,g,cc.nonDynamicParams).filter(Ka(function(a){return function(b){return a&&b.state.includes[a.name]}}(a.options().reloadState))).forEach(function(a,b){a.resolvables=g[b].resolvables}),f},b.prototype._changedParams=function(){var a=this._treeChanges;if(!(this._options.reload||a.exiting.length||a.entering.length||a.to.length!==a.from.length||A(a.to,a.from).map(function(a){return a[0].state!==a[1].state}).reduce(yb,!1))){var b=a.to.map(function(a){return a.paramSchema}),c=[a.to,a.from].map(function(a){return a.map(function(a){return a.paramValues})});return A(b,c[0],c[1]).map(function(a){var b=a[0],c=a[1],d=a[2];return ac.changed(b,c,d)}).reduce(zb,[])}},b.prototype.dynamic=function(){var a=this._changedParams();return!!a&&a.map(function(a){return a.dynamic}).reduce(yb,!1)},b.prototype.ignored=function(){return!!this._ignoredReason()},b.prototype._ignoredReason=function(){var a=this.router.globals.transition,b=this._options.reloadState,c=function(a,c){if(a.length!==c.length)return!1;var d=cc.matching(a,c);return a.length===d.filter(function(a){return!b||!a.state.includes[b.name]}).length},d=this.treeChanges(),e=a&&a.treeChanges();return e&&c(e.to,d.to)&&c(e.exiting,d.exiting)?"SameAsPending":0===d.exiting.length&&0===d.entering.length&&c(d.from,d.to)?"SameAsCurrent":void 0},b.prototype.run=function(){var b=this,c=Wb.runAllHooks,d=function(a){return b._hookBuilder.buildHooksForPhase(a)},e=function(){Tb.traceSuccess(b.$to(),b),b.success=!0,b._deferred.resolve(b.to()),c(d(a.TransitionHookPhase.SUCCESS))},f=function(e){Tb.traceError(e,b),b.success=!1,b._deferred.reject(e),b._error=e,c(d(a.TransitionHookPhase.ERROR))},g=function(){var b=d(a.TransitionHookPhase.RUN),c=function(){return gb.$q.when(void 0)};return Wb.invokeHooks(b,c)},h=function(){var a=b.router.globals;return a.lastStartedTransitionId=b.$id,a.transition=b,a.transitionHistory.enqueue(b),Tb.traceTransitionStart(b),gb.$q.when(void 0)},i=d(a.TransitionHookPhase.BEFORE);return Wb.invokeHooks(i,h).then(g).then(e,f),this.promise},b.prototype.valid=function(){return!this.error()||void 0!==this.success},b.prototype.abort=function(){Ua(this.success)&&(this._aborted=!0)},b.prototype.error=function(){var a=this.$to();return a.self["abstract"]?"Cannot transition to abstract state '"+a.name+"'":ac.validates(a.parameters(),this.params())?!1===this.success?this._error:void 0:"Param values not valid for state '"+a.name+"'"},b.prototype.toString=function(){var a=this.from(),b=this.to(),c=function(a){return null!==a["#"]&&void 0!==a["#"]?a:t(a,["#"])};return"Transition#"+this.$id+"( '"+(_a(a)?a.name:a)+"'"+kb(c(this._treeChanges.from.map(Ha("paramValues")).reduce(ub,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(_a(b)?b.name:b)+"'"+kb(c(this.params()))+" )"},b}();nc.diToken=nc;var oc=null,pc=function(a){var b=Nb.isRejectionPromise;return(oc=oc||i([[Ka(Va),Pa("undefined")],[Wa,Pa("null")],[eb,Pa("[Promise]")],[b,function(a){return a._transitionRejection.toString()}],[Na(Nb),h("toString")],[Na(nc),h("toString")],[Na(ec),h("toString")],[j,V],[Pa(!0),k]]))(a)},qc=function(a){return function(b){if(!b)return["",""];var c=b.indexOf(a);return-1===c?[b,""]:[b.substr(0,c),b.substr(c+1)]}},rc=function(){function a(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=s(a.prototype,["hash","string","query","path","int","bool","date","json","any"]);var b=function(a,b){return new Zb(nb({name:b},a))};this.types=pb(x(this.defaultTypes,b),{})}return a.prototype.dispose=function(){this.types={}},a.prototype.type=function(a,b,c){if(!Va(b))return this.types[a];if(this.types.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return this.types[a]=new Zb(nb({name:a},b)),c&&(this.typeQueue.push({name:a,def:c}),this.enqueue||this._flushTypeQueue()),this},a.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var a=this.typeQueue.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");nb(this.types[a.name],gb.$injector.invoke(a.def))}},a}();!function(){var a=function(a){var b=function(a){return null!=a?a.toString():a},c={encode:b,decode:b,is:Na(String),pattern:/.*/,equals:function(a,b){return a==b}};return nb({},c,a)};nb(rc.prototype,{string:a({}),path:a({pattern:/[^\/]*/}),query:a({}),hash:a({inherit:!1}),"int":a({decode:function(a){return parseInt(a,10)},is:function(a){return!Xa(a)&&this.decode(a.toString())===a},pattern:/-?\d+/}),bool:a({encode:function(a){return a&&1||0},decode:function(a){return 0!==parseInt(a,10)},is:Na(Boolean),pattern:/0|1/}),date:a({encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):void 0},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):void 0},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return["getFullYear","getMonth","getDate"].reduce(function(c,d){return c&&a[d]()===b[d]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:a({encode:kb,decode:jb,is:Na(Object),equals:ob,pattern:/[^\/]*/}),any:a({encode:k,decode:k,is:function(){return!0},equals:ob})})}();var sc=function(){function a(a){void 0===a&&(a={}),nb(this,a)}return a.prototype.$inherit=function(a,b,c){var d,e=r(b,c),f={},g=[];for(var h in e)if(e[h]&&e[h].params&&(d=Object.keys(e[h].params),d.length))for(var i in d)g.indexOf(d[i])>=0||(g.push(d[i]),f[d[i]]=this[d[i]]);return nb({},f,a)},a}(),tc=function(a){if(!$a(a))return!1;var b="^"===a.charAt(0);return{val:b?a.substring(1):a,root:b}},uc=function(a,b){return function(c){var d=c;d&&d.url&&d.name&&d.name.match(/\.\*\*$/)&&(d.url+="{remainder:any}");var e=tc(d.url),f=c.parent,g=e?a.compile(e.val,{params:c.params||{},paramMap:function(a,b){return!1===d.reloadOnSearch&&b&&(a=nb(a||{},{dynamic:!0})),a}}):d.url;if(!g)return null;if(!a.isMatcher(g))throw new Error("Invalid url '"+g+"' in state '"+c+"'");return e&&e.root?g:(f&&f.navigable||b()).url.append(g)}},vc=function(a){return function(b){return!a(b)&&b.url?b:b.parent?b.parent.navigable:null}},wc=function(a){return function(b){var c=function(b,c){return a.fromConfig(c,null,b)},d=b.url&&b.url.parameters({inherit:!1})||[],e=wb(vb(t(b.params||{},d.map(Ha("id"))),c));return d.concat(e).map(function(a){return[a.id,a]}).reduce(B,{})}},xc=function(){function a(a,b){function c(b){return f(b)?null:a.find(d.parentName(b))||e()}this.matcher=a;var d=this,e=function(){return a.find("")},f=function(a){return""===a.name};this.builders={name:[$],self:[_],parent:[c],data:[aa],url:[uc(b,e)],navigable:[vc(f)],params:[wc(b.paramFactory)],views:[],path:[ba],includes:[ca],resolvables:[da]}}return a.prototype.builder=function(a,b){var c=this.builders,d=c[a]||[];return $a(a)&&!Va(b)?d.length>1?d:d[0]:$a(a)&&Ya(b)?(c[a]=d,c[a].push(b),function(){return c[a].splice(c[a].indexOf(b,1))&&null}):void 0},a.prototype.build=function(a){var b=this,c=b.matcher,d=b.builders,e=this.parentName(a);if(e&&!c.find(e,void 0,!1))return null;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f].reduce(function(a,b){return function(c){return b(c,a)}},l);a[f]=g(a)}return a},a.prototype.parentName=function(a){var b=a.name||"",c=b.split(".");if(c.length>1){if(a.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+b+")");return"**"===c.pop()&&c.pop(),c.join(".")}return a.parent?$a(a.parent)?a.parent:a.parent.name:""},a.prototype.name=function(a){var b=a.name;if(-1!==b.indexOf(".")||!a.parent)return b;var c=$a(a.parent)?a.parent:a.parent.name;return c?c+"."+b:b},a}(),yc=function(){function a(a){this._states=a}return a.prototype.isRelative=function(a){return a=a||"",0===a.indexOf(".")||0===a.indexOf("^")},a.prototype.find=function(a,b,c){if(void 0===c&&(c=!0),a||""===a){var d=$a(a),e=d?a:a.name;this.isRelative(e)&&(e=this.resolvePath(e,b));var f=this._states[e];if(f&&(d||!(d||f!==a&&f.self!==a)))return f;if(d&&c){var g=wb(this._states),h=g.filter(function(a){return a.__stateObjectCache.nameGlob&&a.__stateObjectCache.nameGlob.matches(e)});return h.length>1&&console.log("stateMatcher.find: Found multiple matches for "+e+" using glob: ",h.map(function(a){return a.name})),h[0]}}},a.prototype.resolvePath=function(a,b){if(!b)throw new Error("No reference point given for path '"+a+"'");for(var c=this.find(b),d=a.split("."),e=0,f=d.length,g=c;f>e;e++)if(""!==d[e]||0!==e){if("^"!==d[e])break;if(!g.parent)throw new Error("Path '"+a+"' not valid for state '"+c.name+"'");g=g.parent}else g=c;var h=d.slice(e).join(".");return g.name+(g.name&&h?".":"")+h},a}(),zc=function(){function a(a,b,c,d,e){this.$registry=a,this.$urlRouter=b,this.states=c,this.builder=d,this.listeners=e,this.queue=[],this.matcher=a.matcher}return a.prototype.dispose=function(){this.queue=[]},a.prototype.register=function(a){var b=this.queue,c=Ra.create(a),d=c.name;if(!$a(d))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(d)||qb(b.map(Ha("name")),d))throw new Error("State '"+d+"' is already defined");return b.push(c),this.flush(),c},a.prototype.flush=function(){for(var a=this,b=this,c=b.queue,d=b.states,e=b.builder,f=[],g=[],h={},i=function(b){return a.states.hasOwnProperty(b)&&a.states[b]};c.length>0;){var j=c.shift(),k=j.name,l=e.build(j),m=g.indexOf(j);if(l){var n=i(k);if(n&&n.name===k)throw new Error("State '"+k+"' is already defined");var o=i(k+".**");o&&this.$registry.deregister(o),d[k]=j,this.attachRoute(j),m>=0&&g.splice(m,1),f.push(j)}else{var p=h[k];if(h[k]=c.length,m>=0&&p===c.length)return c.push(j),d;0>m&&g.push(j),c.push(j)}}return f.length&&this.listeners.forEach(function(a){return a("registered",f.map(function(a){return a.self}))}),d},a.prototype.attachRoute=function(a){!a["abstract"]&&a.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(a))},a}(),Ac=function(){function a(a){this._router=a,this.states={},this.listeners=[],this.matcher=new yc(this.states),this.builder=new xc(this.matcher,a.urlMatcherFactory),this.stateQueue=new zc(this,a.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return a.prototype._registerRoot=function(){var a={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},"abstract":!0};(this._root=this.stateQueue.register(a)).navigable=null},a.prototype.dispose=function(){var a=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(b){return a.get(b)&&a.deregister(b)})},a.prototype.onStatesChanged=function(a){return this.listeners.push(a),function(){rb(this.listeners)(a)}.bind(this)},a.prototype.root=function(){return this._root},a.prototype.register=function(a){return this.stateQueue.register(a)},a.prototype._deregisterTree=function(a){var b=this,c=this.get().map(function(a){return a.$$state()}),d=function(a){var b=c.filter(function(b){return-1!==a.indexOf(b.parent)});return 0===b.length?b:b.concat(d(b))},e=d([a]),f=[a].concat(e).reverse();return f.forEach(function(a){var c=b._router.urlRouter;c.rules().filter(Ia("state",a)).forEach(c.removeRule.bind(c)),delete b.states[a.name]}),f},a.prototype.deregister=function(a){var b=this.get(a);if(!b)throw new Error("Can't deregister state; not found: "+a);var c=this._deregisterTree(b.$$state());return this.listeners.forEach(function(a){return a("deregistered",c.map(function(a){return a.self}))}),c},a.prototype.get=function(a,b){var c=this;if(0===arguments.length)return Object.keys(this.states).map(function(a){return c.states[a].self});var d=this.matcher.find(a,b);return d&&d.self||null},a.prototype.decorator=function(a,b){return this.builder.builder(a,b)},a}(),Bc=function(a,b,c){return a[b]=a[b]||c()},Cc=Y("/"),Dc=function(){function b(a,c,d,e){var f=this;this.config=e,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=a,this.config=q(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:k});for(var g,h,i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,m=0,n=[],o=function(c){if(!b.nameValidator.test(c))throw new Error("Invalid parameter name '"+c+"' in pattern '"+a+"'");if(w(f._params,Ia("id",c)))throw new Error("Duplicate parameter name '"+c+"' in pattern '"+a+"'")},p=function(b,d){var e=b[2]||b[3],g=d?b[4]:b[4]||("*"===b[1]?".*":null);return{id:e,regexp:g,cfg:f.config.params[e],segment:a.substring(m,b.index),type:g?c.type(g)||function(a){return pb(c.type(d?"query":"path"),{pattern:new RegExp(a,f.config.caseInsensitive?"i":void 0)})}(g):null}};(g=j.exec(a))&&(h=p(g,!1),!(h.segment.indexOf("?")>=0));)o(h.id),this._params.push(d.fromPath(h.id,h.type,this.config.paramMap(h.cfg,!1))),this._segments.push(h.segment),n.push([h.segment,C(this._params)]),m=j.lastIndex;i=a.substring(m);var r=i.indexOf("?");if(r>=0){var s=i.substring(r);if(i=i.substring(0,r),s.length>0)for(m=0;g=l.exec(s);)h=p(g,!0),o(h.id),this._params.push(d.fromSearch(h.id,h.type,this.config.paramMap(h.cfg,!0))),m=j.lastIndex}this._segments.push(i),this._compiled=n.map(function(a){return ea.apply(null,a)}).concat(ea(i))}return b.prototype.append=function(a){return this._children.push(a),a._cache={path:this._cache.path.concat(a),parent:this,pattern:null},a},b.prototype.isRoot=function(){return this._cache.path[0]===this},b.prototype.toString=function(){return this.pattern},b.prototype.exec=function(a,b,c,d){var e=this;void 0===b&&(b={}),void 0===d&&(d={});var f=Bc(this._cache,"pattern",function(){return new RegExp(["^",Cb(e._cache.path.map(Ha("_compiled"))).join(""),!1===e.config.strict?"/?":"","$"].join(""),e.config.caseInsensitive?"i":void 0)}).exec(a);if(!f)return null;var g=this.parameters(),h=g.filter(function(a){return!a.isSearch()}),i=g.filter(function(a){return a.isSearch()}),j=this._cache.path.map(function(a){return a._segments.length-1}).reduce(function(a,b){return a+b}),k={};if(j!==f.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var l=0;j>l;l++){for(var m=h[l],n=f[l+1],o=0;o<m.replace.length;o++)m.replace[o].from===n&&(n=m.replace[o].to);n&&!0===m.array&&(n=function(a){var b=function(a){return a.split("").reverse().join("")},c=function(a){return a.replace(/\\-/g,"-")};return x(x(b(a).split(/-(?!\\)/),b),c).reverse()}(n)),Va(n)&&(n=m.type.decode(n)),k[m.id]=m.value(n)}return i.forEach(function(a){for(var c=b[a.id],d=0;d<a.replace.length;d++)a.replace[d].from===c&&(c=a.replace[d].to);Va(c)&&(c=a.type.decode(c)),k[a.id]=a.value(c)}),c&&(k["#"]=c),k},b.prototype.parameters=function(a){return void 0===a&&(a={}),!1===a.inherit?this._params:Cb(this._cache.path.map(function(a){return a._params}))},b.prototype.parameter=function(a,b){var c=this;void 0===b&&(b={});var d=this._cache.parent;return function(){for(var b=0,d=c._params;b<d.length;b++){var e=d[b];if(e.id===a)return e}}()||!1!==b.inherit&&d&&d.parameter(a,b)||null},b.prototype.validates=function(a){var b=function(a,b){return!a||a.validates(b)};return a=a||{},this.parameters().filter(function(b){return a.hasOwnProperty(b.id)}).map(function(c){return b(c,a[c.id])}).reduce(xb,!0)},b.prototype.format=function(a){function c(b){var c=b.value(a[b.id]),d=b.validates(c),e=b.isDefaultValue(c);return{param:b,value:c,isValid:d,isDefaultValue:e,squash:!!e&&b.squash,encoded:b.type.encode(c)}}void 0===a&&(a={});var d=this._cache.path,e=d.map(b.pathSegmentsAndParams).reduce(zb,[]).map(function(a){return $a(a)?a:c(a)}),f=d.map(b.queryParams).reduce(zb,[]).map(c),g=function(a){return!1===a.isValid};if(e.concat(f).filter(g).length)return null;var h=e.reduce(function(a,c){if($a(c))return a+c;var d=c.squash,e=c.encoded,f=c.param;return!0===d?a.match(/\/$/)?a.slice(0,-1):a:$a(d)?a+d:!1!==d?a:null==e?a:ab(e)?a+x(e,b.encodeDashes).join("-"):f.raw?a+e:a+encodeURIComponent(e)},""),i=f.map(function(a){var b=a.param,c=a.squash,d=a.encoded,e=a.isDefaultValue;return null==d||e&&!1!==c||(ab(d)||(d=[d]),0===d.length)?void 0:(b.raw||(d=x(d,encodeURIComponent)),d.map(function(a){return b.id+"="+a}))}).filter(k).reduce(zb,[]).join("&");return h+(i?"?"+i:"")+(a["#"]?"#"+a["#"]:"")},b.encodeDashes=function(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})},b.pathSegmentsAndParams=function(b){return A(b._segments,b._params.filter(function(b){return b.location===a.DefType.PATH}).concat(void 0)).reduce(zb,[]).filter(function(a){return""!==a&&Va(a)})},b.queryParams=function(b){return b._params.filter(function(b){return b.location===a.DefType.SEARCH})},b.compare=function(a,c){var d,e,f=function(a){return a._cache.segments=a._cache.segments||a._cache.path.map(b.pathSegmentsAndParams).reduce(zb,[]).reduce(Z,[]).map(function(a){return $a(a)?Cc(a):a}).reduce(zb,[])},g=function(a){return a._cache.weights=a._cache.weights||f(a).map(function(a){return"/"===a?1:$a(a)?2:a instanceof ac?3:void 0})},h=A(g(a),g(c));for(e=0;e<h.length;e++)if(0!==(d=h[e][0]-h[e][1]))return d;return 0},b}();Dc.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;var Ec=function(){function b(){var b=this;this.paramTypes=new rc,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(a){return nb({strict:b._isStrictMode,caseInsensitive:b._isCaseInsensitive},a)},this.paramFactory={fromConfig:function(c,d,e){return new ac(c,d,e,a.DefType.CONFIG,b)},fromPath:function(c,d,e){return new ac(c,d,e,a.DefType.PATH,b)},fromSearch:function(c,d,e){return new ac(c,d,e,a.DefType.SEARCH,b)}},nb(this,{UrlMatcher:Dc,Param:ac})}return b.prototype.caseInsensitive=function(a){return this._isCaseInsensitive=Va(a)?a:this._isCaseInsensitive},b.prototype.strictMode=function(a){return this._isStrictMode=Va(a)?a:this._isStrictMode;
},b.prototype.defaultSquashPolicy=function(a){if(Va(a)&&!0!==a&&!1!==a&&!$a(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Va(a)?a:this._defaultSquashPolicy},b.prototype.compile=function(a,b){return new Dc(a,this.paramTypes,this.paramFactory,this._getConfig(b))},b.prototype.isMatcher=function(a){if(!_a(a))return!1;var b=!0;return mb(Dc.prototype,function(c,d){Ya(c)&&(b=b&&Va(a[d])&&Ya(a[d]))}),b},b.prototype.type=function(a,b,c){var d=this.paramTypes.type(a,b,c);return Va(b)?this:d},b.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},b.prototype.dispose=function(){this.paramTypes.dispose()},b}(),Fc=function(){function a(a){this.router=a}return a.prototype.compile=function(a){return this.router.urlMatcherFactory.compile(a)},a.prototype.create=function(a,b){var c=this,d=i([[$a,function(a){return d(c.compile(a))}],[Na(Dc),function(a){return c.fromUrlMatcher(a,b)}],[db,function(a){return c.fromState(a,c.router)}],[Na(RegExp),function(a){return c.fromRegExp(a,b)}],[Ya,function(a){return new Hc(a,b)}]]),e=d(a);if(!e)throw new Error("invalid 'what' in when()");return e},a.prototype.fromUrlMatcher=function(a,b){function c(b){var c=a.exec(b.path,b.search,b.hash);return a.validates(c)&&c}function d(b){var c=a.parameters().filter(function(a){return a.isOptional});return c.length?c.filter(function(a){return b[a.id]}).length/c.length:1e-6}var e=b;$a(b)&&(b=this.router.urlMatcherFactory.compile(b)),Na(Dc)(b)&&(e=function(a){return b.format(a)});var f={urlMatcher:a,matchPriority:d,type:"URLMATCHER"};return nb(new Hc(c,e),f)},a.prototype.fromState=function(a,b){var c=function(c){var d=b.stateService,e=b.globals;d.href(a,c)!==d.href(e.current,e.params)&&d.transitionTo(a,c,{inherit:!0,source:"url"})},d={state:a,type:"STATE"};return nb(this.fromUrlMatcher(a.url,c),d)},a.prototype.fromRegExp=function(a,b){if(a.global||a.sticky)throw new Error("Rule RegExp must not be global or sticky");var c=function(a){return b.replace(/\$(\$|\d{1,2})/,function(b,c){return a["$"===c?0:Number(c)]})},d=$a(b)?c:b,e=function(b){return a.exec(b.path)},f={regexp:a,type:"REGEXP"};return nb(new Hc(e,d),f)},a}();Fc.isUrlRule=function(a){return a&&["type","match","handler"].every(function(b){return Va(a[b])})};var Gc,Hc=function(){function a(a,b){var c=this;this.match=a,this.type="RAW",this.matchPriority=function(a){return 0-c.$id},this.handler=b||k}return a}(),Ic=Ha("urlMatcher");Gc=Ib(Hb(e(Ha("priority"),function(a){return-a})),Hb(e(Ha("type"),function(a){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[a]})),function(a,b){return Ic(a)&&Ic(b)?Dc.compare(Ic(a),Ic(b)):0},Hb(Ha("$id"),qb(["REGEXP","RAW","OTHER"])));var Jc=function(){function a(b){this._sortFn=Gc,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=b,this.urlRuleFactory=new Fc(b),m(Pa(a.prototype),this,Pa(this))}return a.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},a.prototype.sort=function(a){this._rules.sort(this._sortFn=a||this._sortFn),this._sorted=!0},a.prototype.ensureSorted=function(){this._sorted||this.sort()},a.prototype.match=function(a){var b=this;this.ensureSorted(),a=nb({path:"",search:{},hash:""},a);var c=this.rules();this._otherwiseFn&&c.push(this._otherwiseFn);for(var d,e=0;e<c.length&&(!d||0===this._sortFn(c[e],d.rule));e++){var f=function(c){var d=c.match(a,b._router);return d&&{match:d,rule:c,weight:c.matchPriority(d)}}(c[e]);d=!d||f&&f.weight>d.weight?f:d}return d},a.prototype.sync=function(a){if(!a||!a.defaultPrevented){var b=this._router,c=b.urlService,d=b.stateService,e={path:c.path(),search:c.search(),hash:c.hash()},f=this.match(e);i([[$a,function(a){return c.url(a,!0)}],[Ub.isDef,function(a){return d.go(a.state,a.params,a.options)}],[Na(Ub),function(a){return d.go(a.state(),a.params(),a.options())}]])(f&&f.rule.handler(f.match,e,b))}},a.prototype.listen=function(a){var b=this;return!1!==a?this._stopFn=this._stopFn||this._router.urlService.onChange(function(a){return b.sync(a)}):(this._stopFn&&this._stopFn(),void delete this._stopFn)},a.prototype.update=function(a){var b=this._router.locationService;return a?void(this.location=b.path()):void(b.path()!==this.location&&b.url(this.location,!0))},a.prototype.push=function(a,b,c){var d=c&&!!c.replace;this._router.urlService.url(a.format(b||{}),d)},a.prototype.href=function(a,b,c){var d=a.format(b);if(null==d)return null;c=c||{absolute:!1};var e=this._router.urlService.config,f=e.html5Mode();if(f||null===d||(d="#"+e.hashPrefix()+d),d=fa(d,f,c.absolute,e.baseHref()),!c.absolute||!d)return d;var g=!f&&d?"/":"",h=e.port();return h=80===h||443===h?"":":"+h,[e.protocol(),"://",e.host(),h,g,d].join("")},a.prototype.rule=function(a){var b=this;if(!Fc.isUrlRule(a))throw new Error("invalid rule");return a.$id=this._id++,a.priority=a.priority||0,this._rules.push(a),this._sorted=!1,function(){return b.removeRule(a)}},a.prototype.removeRule=function(a){rb(this._rules,a)},a.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},a.prototype.otherwise=function(a){var b=ga(a);this._otherwiseFn=this.urlRuleFactory.create(Pa(!0),b),this._sorted=!1},a.prototype.initial=function(a){var b=ga(a),c=function(a,b){return 0===b.globals.transitionHistory.size()&&!!/^\/?$/.exec(a.path)};this.rule(this.urlRuleFactory.create(c,b))},a.prototype.when=function(a,b,c){var d=this.urlRuleFactory.create(a,b);return Va(c&&c.priority)&&(d.priority=c.priority),this.rule(d),d},a.prototype.deferIntercept=function(a){void 0===a&&(a=!0),this.interceptDeferred=a},a}(),Kc=function(){function a(){var a=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return a._uiViews},_activeViewConfigs:function(){return a._viewConfigs}}}return a.prototype._rootViewContext=function(a){return this._rootContext=a||this._rootContext},a.prototype._viewConfigFactory=function(a,b){this._viewConfigFactories[a]=b},a.prototype.createViewConfig=function(a,b){var c=this._viewConfigFactories[b.$type];if(!c)throw new Error("ViewService: No view config factory registered for type "+b.$type);var d=c(a,b);return ab(d)?d:[d]},a.prototype.deactivateViewConfig=function(a){Tb.traceViewServiceEvent("<- Removing",a),rb(this._viewConfigs,a)},a.prototype.activateViewConfig=function(a){Tb.traceViewServiceEvent("-> Registering",a),this._viewConfigs.push(a)},a.prototype.sync=function(){function b(a){var b=function(a){return a&&a.parent?b(a.parent)+1:1};return 1e4*a.fqn.split(".").length+b(a.creationContext)}function d(a){for(var b=a.viewDecl.$context,c=0;++c&&b.parent;)b=b.parent;return c}var e=this,f=this._uiViews.map(function(a){return[a.fqn,a]}).reduce(B,{}),g=c(function(a,b,c,d){return b*(a(c)-a(d))}),h=function(b){var c=e._viewConfigs.filter(a.matches(f,b));return c.length>1&&c.sort(g(d,-1)),[b,c[0]]},i=function(a){var b=a[0],c=a[1];-1!==e._uiViews.indexOf(b)&&b.configUpdated(c)};this._uiViews.sort(g(b,1)).map(h).forEach(i)},a.prototype.registerUIView=function(a){Tb.traceViewServiceUIViewEvent("-> Registering",a);var b=this._uiViews,c=function(b){return b.fqn===a.fqn};return b.filter(c).length&&Tb.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",a),b.push(a),this.sync(),function(){return-1===b.indexOf(a)?void Tb.traceViewServiceUIViewEvent("Tried removing non-registered uiView",a):(Tb.traceViewServiceUIViewEvent("<- Deregistering",a),void rb(b)(a))}},a.prototype.available=function(){return this._uiViews.map(Ha("fqn"))},a.prototype.active=function(){return this._uiViews.filter(Ha("$config")).map(Ha("name"))},a.normalizeUIViewTarget=function(a,b){void 0===b&&(b="");var c=b.split("@"),d=c[0]||"$default",e=$a(c[1])?c[1]:"^",f=/^(\^(?:\.\^)*)\.(.*$)/.exec(d);return f&&(e=f[1],d=f[2]),"!"===d.charAt(0)&&(d=d.substr(1),e=""),/^(\^(?:\.\^)*)$/.exec(e)?e=e.split(".").reduce(function(a,b){return a.parent},a).name:"."===e&&(e=a.name),{uiViewName:d,uiViewContextAnchor:e}},a}();Kc.matches=function(a,b){return function(c){if(b.$type!==c.viewDecl.$type)return!1;var d=c.viewDecl,e=d.$uiViewName.split("."),f=b.fqn.split(".");if(!ob(e,f.slice(0-e.length)))return!1;var g=1-e.length||void 0,h=f.slice(0,g).join("."),i=a[h].creationContext;return d.$uiViewContextAnchor===(i&&i.name)}};var Lc=function(){function a(){this.params=new sc,this.lastStartedTransitionId=-1,this.transitionHistory=new Lb([],1),this.successfulTransitions=new Lb([],1)}return a.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},a}(),Mc=function(a){return a.reduce(function(a,b){return a[b]=fb(b),a},{dispose:l})},Nc=["url","path","search","hash","onChange"],Oc=["port","protocol","host","baseHref","html5Mode","hashPrefix"],Pc=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Qc=["sort","when","initial","otherwise","rules","rule","removeRule"],Rc=["deferIntercept","listen","sync","match"],Sc=function(){function a(a,b){void 0===b&&(b=!0),this.router=a,this.rules={},this.config={};var c=function(){return a.locationService};m(c,this,c,Nc,b);var d=function(){return a.locationConfig};m(d,this.config,d,Oc,b);var e=function(){return a.urlMatcherFactory};m(e,this.config,e,Pc);var f=function(){return a.urlRouter};m(f,this.rules,f,Qc),m(f,this,f,Rc)}return a.prototype.url=function(a,b,c){},a.prototype.path=function(){},a.prototype.search=function(){},a.prototype.hash=function(){},a.prototype.onChange=function(a){},a.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},a.prototype.dispose=function(){},a.prototype.sync=function(a){},a.prototype.listen=function(a){},a.prototype.deferIntercept=function(a){},a.prototype.match=function(a){},a}();Sc.locationServiceStub=Mc(Nc),Sc.locationConfigStub=Mc(Oc);var Tc=0,Uc=function(){function a(a,b){void 0===a&&(a=Sc.locationServiceStub),void 0===b&&(b=Sc.locationConfigStub),this.locationService=a,this.locationConfig=b,this.$id=Tc++,this._disposed=!1,this._disposables=[],this.trace=Tb,this.viewService=new Kc,this.transitionService=new ud(this),this.globals=new Lc,this.urlMatcherFactory=new Ec,this.urlRouter=new Jc(this),this.stateRegistry=new Ac(this),this.stateService=new vd(this),this.urlService=new Sc(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(a),this.disposable(b)}return a.prototype.disposable=function(a){this._disposables.push(a)},a.prototype.dispose=function(a){var b=this;return a&&Ya(a.dispose)?void a.dispose(this):(this._disposed=!0,void this._disposables.slice().forEach(function(a){try{"function"==typeof a.dispose&&a.dispose(b),rb(b._disposables,a)}catch(a){}}))},a.prototype.plugin=function(a,b){void 0===b&&(b={});var c=new a(this,b);if(!c.name)throw new Error("Required property `name` missing on plugin: "+c);return this._disposables.push(c),this._plugins[c.name]=c},a.prototype.getPlugin=function(a){return a?this._plugins[a]:wb(this._plugins)},a}(),Vc=function(a){return a.onCreate({},ha)},Wc=function(a){function b(b){return b?b instanceof Ub?b:$a(b)?d.target(b,a.params(),a.options()):b.state||b.params?d.target(b.state||a.to(),b.params||a.params(),a.options()):void 0:void 0}var c=a.to().redirectTo;if(c){var d=a.router.stateService;return Ya(c)?gb.$q.when(c(a)).then(b):b(c)}},Xc=function(a){return a.onStart({to:function(a){return!!a.redirectTo}},Wc)},Yc=ia("onExit"),Zc=function(a){return a.onExit({exiting:function(a){return!!a.onExit}},Yc)},$c=ia("onRetain"),_c=function(a){return a.onRetain({retained:function(a){return!!a.onRetain}},$c)},ad=ia("onEnter"),bd=function(a){return a.onEnter({entering:function(a){return!!a.onEnter}},ad)},cd=function(a){return new kc(a.treeChanges().to).resolvePath("EAGER",a).then(l)},dd=function(a){return a.onStart({},cd,{priority:1e3})},ed=function(a,b){return new kc(a.treeChanges().to).subContext(b.$$state()).resolvePath("LAZY",a).then(l)},fd=function(a){return a.onEnter({entering:Pa(!0)},ed,{priority:1e3})},gd=function(a){var b=gb.$q,c=a.views("entering");return c.length?b.all(c.map(function(a){return b.when(a.load())})).then(l):void 0},hd=function(a){return a.onFinish({},gd)},id=function(a){var b=a.views("entering"),c=a.views("exiting");if(b.length||c.length){var d=a.router.viewService;c.forEach(function(a){return d.deactivateViewConfig(a)}),b.forEach(function(a){return d.activateViewConfig(a)}),d.sync()}},jd=function(a){return a.onSuccess({},id)},kd=function(a){var b=a.router.globals,c=function(){b.successfulTransitions.enqueue(a),b.$current=a.$to(),b.current=b.$current.self,lb(a.params(),b.params)},d=function(){b.transition===a&&(b.transition=null)};a.onSuccess({},c,{priority:1e4}),a.promise.then(d,d)},ld=function(a){return a.onCreate({},kd)},md=function(a){var b=a.options(),c=a.router.stateService,d=a.router.urlRouter;if("url"!==b.source&&b.location&&c.$current.navigable){var e={replace:"replace"===b.location};d.push(c.$current.navigable.url,c.params,e)}d.update(!0)},nd=function(a){return a.onSuccess({},md,{priority:9999})},od=function(a){function b(){if("url"!==a.originalTransition().options().source){var b=a.targetState();return c.stateService.target(b.identifier(),b.params(),b.options())}var d=c.urlService,e=d.match(d.parts()),f=e&&e.rule;if(f&&"STATE"===f.type){var g=f.state,h=e.match;return c.stateService.target(g,h,a.options())}c.urlService.sync()}var c=a.router,d=a.entering().filter(function(a){return!!a.$$state().lazyLoad}).map(function(b){return ja(a,b)});return gb.$q.all(d).then(b)},pd=function(a){return a.onBefore({entering:function(a){return!!a.lazyLoad}},od)},qd=function(){function a(a,b,c,d,e,f,g,h){void 0===e&&(e=!1),void 0===f&&(f=Wb.HANDLE_RESULT),void 0===g&&(g=Wb.REJECT_ERROR),void 0===h&&(h=!1),this.name=a,this.hookPhase=b,this.hookOrder=c,this.criteriaMatchPath=d,this.reverseSort=e,this.getResultHandler=f,this.getErrorHandler=g,this.synchronous=h}return a}(),rd=function(a){return a.onBefore({},ka,{priority:-9999})},sd=function(a){return a.onBefore({},la,{priority:-1e4})},td={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},ud=function(){function b(a){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=a,this.$view=a.viewService,this._deregisterHookFns={},this._pluginapi=m(Pa(this),{},Pa(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return b.prototype.onCreate=function(a,b,c){},b.prototype.onBefore=function(a,b,c){},b.prototype.onStart=function(a,b,c){},b.prototype.onExit=function(a,b,c){},b.prototype.onRetain=function(a,b,c){},b.prototype.onEnter=function(a,b,c){},b.prototype.onFinish=function(a,b,c){},b.prototype.onSuccess=function(a,b,c){},b.prototype.onError=function(a,b,c){},b.prototype.dispose=function(a){wb(this._registeredHooks).forEach(function(a){return a.forEach(function(b){b._deregistered=!0,rb(a,b)})})},b.prototype.create=function(a,b){return new nc(a,b,this._router)},b.prototype._defineCoreEvents=function(){var b=a.TransitionHookPhase,c=Wb,d=this._criteriaPaths;this._defineEvent("onCreate",b.CREATE,0,d.to,!1,c.LOG_REJECTED_RESULT,c.THROW_ERROR,!0),this._defineEvent("onBefore",b.BEFORE,0,d.to),this._defineEvent("onStart",b.RUN,0,d.to),this._defineEvent("onExit",b.RUN,100,d.exiting,!0),this._defineEvent("onRetain",b.RUN,200,d.retained),this._defineEvent("onEnter",b.RUN,300,d.entering),this._defineEvent("onFinish",b.RUN,400,d.to),this._defineEvent("onSuccess",b.SUCCESS,0,d.to,!1,c.LOG_REJECTED_RESULT,c.LOG_ERROR,!0),this._defineEvent("onError",b.ERROR,0,d.to,!1,c.LOG_REJECTED_RESULT,c.LOG_ERROR,!0)},b.prototype._defineCorePaths=function(){var b=a.TransitionHookScope.STATE,c=a.TransitionHookScope.TRANSITION;this._definePathType("to",c),this._definePathType("from",c),this._definePathType("exiting",b),this._definePathType("retained",b),this._definePathType("entering",b)},b.prototype._defineEvent=function(a,b,c,d,e,f,g,h){void 0===e&&(e=!1),void 0===f&&(f=Wb.HANDLE_RESULT),void 0===g&&(g=Wb.REJECT_ERROR),void 0===h&&(h=!1);var i=new qd(a,b,c,d,e,f,g,h);this._eventTypes.push(i),L(this,this,i)},b.prototype._getEvents=function(a){return(Va(a)?this._eventTypes.filter(function(b){return b.hookPhase===a}):this._eventTypes.slice()).sort(function(a,b){var c=a.hookPhase-b.hookPhase;return 0===c?a.hookOrder-b.hookOrder:c})},b.prototype._definePathType=function(a,b){this._criteriaPaths[a]={name:a,scope:b}},b.prototype._getPathTypes=function(){return this._criteriaPaths},b.prototype.getHooks=function(a){return this._registeredHooks[a]},b.prototype._registerCoreTransitionHooks=function(){var a=this._deregisterHookFns;a.addCoreResolves=Vc(this),a.ignored=rd(this),a.invalid=sd(this),a.redirectTo=Xc(this),a.onExit=Zc(this),a.onRetain=_c(this),a.onEnter=bd(this),a.eagerResolve=dd(this),a.lazyResolve=fd(this),a.loadViews=hd(this),a.activateViews=jd(this),a.updateGlobals=ld(this),a.updateUrl=nd(this),a.lazyLoad=pd(this)},b}(),vd=function(){function b(a){this.router=a,this.invalidCallbacks=[],this._defaultErrorHandler=function(a){a instanceof Error&&a.stack?(console.error(a),console.error(a.stack)):a instanceof Nb?(console.error(a.toString()),a.detail&&a.detail.stack&&console.error(a.detail.stack)):console.error(a)};var c=["current","$current","params","transition"],d=Object.keys(b.prototype).filter(Ka(qb(c)));m(Pa(b.prototype),this,Pa(this),d)}return Object.defineProperty(b.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this.defaultErrorHandler(l),this.invalidCallbacks=[]},b.prototype._handleInvalidTargetState=function(a,b){function c(){var a=i.dequeue();return void 0===a?Nb.invalid(b.error()).toPromise():gb.$q.when(a(b,e,j)).then(k).then(function(a){return a||c()})}var d=this,e=cc.makeTargetState(a),f=this.router.globals,g=function(){return f.transitionHistory.peekTail()},h=g(),i=new Lb(this.invalidCallbacks.slice()),j=new kc(a).injector(),k=function(a){if(a instanceof Ub){var b=a;return b=d.target(b.identifier(),b.params(),b.options()),b.valid()?g()!==h?Nb.superseded().toPromise():d.transitionTo(b.identifier(),b.params(),b.options()):Nb.invalid(b.error()).toPromise()}};return c()},b.prototype.onInvalid=function(a){return this.invalidCallbacks.push(a),function(){rb(this.invalidCallbacks)(a)}.bind(this)},b.prototype.reload=function(a){return this.transitionTo(this.current,this.params,{reload:!Va(a)||a,inherit:!1,notify:!1})},b.prototype.go=function(a,b,c){var d={relative:this.$current,inherit:!0},e=q(c,d,td);return this.transitionTo(a,b,e)},b.prototype.target=function(a,b,c){if(void 0===c&&(c={}),_a(c.reload)&&!c.reload.name)throw new Error("Invalid reload state object");var d=this.router.stateRegistry;if(c.reloadState=!0===c.reload?d.root():d.matcher.find(c.reload,c.relative),c.reload&&!c.reloadState)throw new Error("No such reload state '"+($a(c.reload)?c.reload:c.reload.name)+"'");var e=d.matcher.find(a,c.relative);return new Ub(a,e,b,c)},b.prototype.getCurrentPath=function(){var a=this,b=this.router.globals,c=b.successfulTransitions.peekTail();return c?c.treeChanges().to:function(){return[new bc(a.router.stateRegistry.root())]}()},b.prototype.transitionTo=function(b,c,d){var e=this;void 0===c&&(c={}),void 0===d&&(d={});var f=this.router,g=f.globals;d=q(d,td),d=nb(d,{current:function(){return g.transition}});var h=this.target(b,c,d),i=this.getCurrentPath();if(!h.exists())return this._handleInvalidTargetState(i,h);if(!h.valid())return Kb(h.error());var j=function(b){return function(c){if(c instanceof Nb){var d=f.globals.lastStartedTransitionId===b.$id;if(c.type===a.RejectType.IGNORED)return d&&f.urlRouter.update(),gb.$q.when(g.current);var h=c.detail;if(c.type===a.RejectType.SUPERSEDED&&c.redirected&&h instanceof Ub){var i=b.redirect(h);return i.run()["catch"](j(i))}if(c.type===a.RejectType.ABORTED)return d&&f.urlRouter.update(),gb.$q.reject(c)}return e.defaultErrorHandler()(c),gb.$q.reject(c)}},k=this.router.transitionService.create(i,h),l=k.run()["catch"](j(k));return Jb(l),nb(l,{transition:k})},b.prototype.is=function(a,b,c){c=q(c,{relative:this.$current});var d=this.router.stateRegistry.matcher.find(a,c.relative);if(Va(d)){if(this.$current!==d)return!1;if(!b)return!0;var e=d.parameters({inherit:!0,matchingKeys:b});return ac.equals(e,ac.values(e,b),this.params)}},b.prototype.includes=function(a,b,c){c=q(c,{relative:this.$current});var d=$a(a)&&Qa.fromString(a);if(d){if(!d.matches(this.$current.name))return!1;a=this.$current.name}var e=this.router.stateRegistry.matcher.find(a,c.relative),f=this.$current.includes;if(Va(e)){if(!Va(f[e.name]))return!1;if(!b)return!0;var g=e.parameters({inherit:!0,matchingKeys:b});return ac.equals(g,ac.values(g,b),this.params)}},b.prototype.href=function(a,b,c){c=q(c,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),b=b||{};var d=this.router.stateRegistry.matcher.find(a,c.relative);if(!Va(d))return null;c.inherit&&(b=this.params.$inherit(b,this.$current,d));var e=d&&c.lossy?d.navigable:d;return e&&void 0!==e.url&&null!==e.url?this.router.urlRouter.href(e.url,b,{absolute:c.absolute}):null},b.prototype.defaultErrorHandler=function(a){return this._defaultErrorHandler=a||this._defaultErrorHandler},b.prototype.get=function(a,b){var c=this.router.stateRegistry;return 0===arguments.length?c.get():c.get(a,b||this.$current)},b.prototype.lazyLoad=function(a,b){var c=this.get(a);if(!c||!c.lazyLoad)throw new Error("Can not lazy load "+a);var d=this.getCurrentPath(),e=cc.makeTargetState(d);return b=b||this.router.transitionService.create(d,e),ja(b,c)},b}(),wd={when:function(a){return new Promise(function(b,c){return b(a)})},reject:function(a){return new Promise(function(b,c){c(a)})},defer:function(){var a={};return a.promise=new Promise(function(b,c){a.resolve=b,a.reject=c}),a},all:function(a){if(ab(a))return Promise.all(a);if(_a(a)){var b=Object.keys(a).map(function(b){return a[b].then(function(a){return{key:b,val:a}})});return wd.all(b).then(function(a){return a.reduce(function(a,b){return a[b.key]=b.val,a},{})})}}},xd={},yd={get:function(a){return xd[a]},has:function(a){return null!=yd.get(a)},invoke:function(a,b,c){var d=nb({},xd,c||{}),e=yd.annotate(a),f=Eb(function(a){return d.hasOwnProperty(a)},function(a){return"DI can't find injectable: '"+a+"'"}),g=e.filter(f).map(function(a){return d[a]});return Ya(a)?a.apply(b,g):a.slice(-1)[0].apply(b,g)},annotate:function(a){if(!j(a))throw new Error("Not an injectable function: "+a);if(a&&a.$inject)return a.$inject;if(ab(a))return a.slice(0,-1);var b=a.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,"");return b.slice(b.indexOf("(")+1,b.indexOf(")")).match(/([^\s,]+)/g)||[]}},zd=function(a){return function(b){if(!b)return["",""];var c=b.indexOf(a);return-1===c?[b,""]:[b.substr(0,c),b.substr(c+1)]}},Ad=zd("#"),Bd=zd("?"),Cd=zd("="),Dd=function(a){return a?a.replace(/^#/,""):""},Ed=function(a,b){var c=b[0],d=b[1];return a.hasOwnProperty(c)?ab(a[c])?a[c].push(d):a[c]=[a[c],d]:a[c]=d,a},Fd=function(a){return a.split("&").filter(k).map(Cd).reduce(Ed,{})},Gd=function(a){var b=a.path(),c=a.search(),d=a.hash(),e=Object.keys(c).map(function(a){var b=c[a];return(ab(b)?b:[b]).map(function(b){return a+"="+b})}).reduce(zb,[]).join("&");return b+(e?"?"+e:"")+(d?"#"+d:"")},Hd=function(){function a(a,b){var c=this;this.fireAfterUpdate=b,this._listener=function(a){return c._listeners.forEach(function(b){return b(a)})},this._listeners=[],this.hash=function(){return ma(c._get()).hash},this.path=function(){return ma(c._get()).path},this.search=function(){return Fd(ma(c._get()).search)},this._location=window&&window.location,this._history=window&&window.history}return a.prototype.url=function(a,b){if(void 0===b&&(b=!0),Va(a)&&a!==this._get()&&(this._set(null,null,a,b),this.fireAfterUpdate)){var c=nb(new Event("locationchange"),{url:a});this._listeners.forEach(function(a){return a(c)})}return Gd(this)},a.prototype.onChange=function(a){var b=this;return this._listeners.push(a),function(){return rb(b._listeners,a)}},a.prototype.dispose=function(a){tb(this._listeners)},a}(),Id=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Jd=function(a){function b(b){var c=a.call(this,b,!1)||this;return window.addEventListener("hashchange",c._listener,!1),c}return Id(b,a),b.prototype._get=function(){return Dd(this._location.hash)},b.prototype._set=function(a,b,c,d){this._location.hash=c},b.prototype.dispose=function(b){a.prototype.dispose.call(this,b),window.removeEventListener("hashchange",this._listener)},b}(Hd),Kd=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ld=function(a){function b(b){return a.call(this,b,!0)||this}return Kd(b,a),b.prototype._get=function(){return this._url},b.prototype._set=function(a,b,c,d){this._url=c},b}(Hd),Md=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Nd=function(a){function b(b){var c=a.call(this,b,!0)||this;return c._config=b.urlService.config,window.addEventListener("popstate",c._listener,!1),c}return Md(b,a),b.prototype._get=function(){var a=this._location,b=a.pathname,c=a.hash,d=a.search;return d=Bd(d)[1],c=Ad(c)[1],b+(d?"?"+d:"")+(c?"$"+d:"")},b.prototype._set=function(a,b,c,d){var e=this,f=e._config,g=e._history,h=f.baseHref()+c;d?g.replaceState(a,b,h):g.pushState(a,b,h)},b.prototype.dispose=function(b){a.prototype.dispose.call(this,b),window.removeEventListener("popstate",this._listener)},b}(Hd),Od=function(){function a(){var a=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return a._port},this.protocol=function(){return a._protocol},this.host=function(){return a._host},this.baseHref=function(){return a._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(b){return Va(b)?a._hashPrefix=b:a._hashPrefix},this.dispose=l}return a}(),Pd=function(){function a(a,b){void 0===b&&(b=!1),this._isHtml5=b,this._baseHref=void 0,this._hashPrefix=""}return a.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},a.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},a.prototype.host=function(){return location.host},a.prototype.html5Mode=function(){return this._isHtml5},a.prototype.hashPrefix=function(a){return Va(a)?this._hashPrefix=a:this._hashPrefix},a.prototype.baseHref=function(a){return Va(a)?this._baseHref=a:this._baseHref||this.applyDocumentBaseHref()},a.prototype.applyDocumentBaseHref=function(){var a=document.getElementsByTagName("base");return this._baseHref=a.length?a[0].href.substr(location.origin.length):""},a.prototype.dispose=function(){},a}(),Qd=na("vanilla.hashBangLocation",!1,Jd,Pd),Rd=na("vanilla.pushStateLocation",!0,Nd,Pd),Sd=na("vanilla.memoryLocation",!1,Ld,Od),Td=function(){function a(){}return a.prototype.dispose=function(a){},a}(),Ud=Object.freeze({fromJson:jb,toJson:kb,copy:lb,forEach:mb,extend:nb,equals:ob,identity:k,noop:l,createProxyFunctions:m,inherit:pb,inArray:qb,_inArray:n,removeFrom:rb,_removeFrom:o,pushTo:sb,_pushTo:p,deregAll:tb,defaults:q,mergeR:ub,ancestors:r,pick:s,omit:t,pluck:u,filter:v,find:w,mapObj:vb,map:x,values:wb,allTrueR:xb,anyTrueR:yb,unnestR:zb,flattenR:Ab,pushR:y,uniqR:Bb,unnest:Cb,flatten:Db,assertPredicate:Eb,assertMap:Fb,assertFn:z,pairs:Gb,arrayTuples:A,applyPairs:B,tail:C,_extend:F,sortBy:Hb,composeSort:Ib,silenceUncaughtInPromise:Jb,silentRejection:Kb,notImplemented:fb,services:gb,Glob:Qa,curry:c,compose:d,pipe:e,prop:Ha,propEq:Ia,parse:Ja,not:Ka,and:f,or:g,all:La,any:Ma,is:Na,eq:Oa,val:Pa,invoke:h,pattern:i,isUndefined:Ua,isDefined:Va,isNull:Wa,isNullOrUndefined:Xa,isFunction:Ya,isNumber:Za,isString:$a,isObject:_a,isArray:ab,isDate:bb,isRegExp:cb,isState:db,isInjectable:j,isPromise:eb,Queue:Lb,maxLength:S,padString:T,kebobString:U,functionToString:V,fnToString:W,stringify:X,beforeAfterSubstr:qc,splitOnDelim:Y,joinNeighborsR:Z,get Category(){return a.Category},Trace:Sb,trace:Tb,get DefType(){return a.DefType},Param:ac,ParamTypes:rc,StateParams:sc,ParamType:Zb,PathNode:bc,PathUtils:cc,resolvePolicies:fc,defaultResolvePolicy:dc,Resolvable:ec,NATIVE_INJECTOR_TOKEN:jc,ResolveContext:kc,resolvablesBuilder:da,StateBuilder:xc,StateObject:Ra,StateMatcher:yc,StateQueueManager:zc,StateRegistry:Ac,StateService:vd,TargetState:Ub,get TransitionHookPhase(){return a.TransitionHookPhase},get TransitionHookScope(){return a.TransitionHookScope},HookBuilder:Yb,matchState:K,RegisteredHook:Xb,makeEvent:L,get RejectType(){return a.RejectType},Rejection:Nb,Transition:nc,TransitionHook:Wb,TransitionEventType:qd,defaultTransOpts:td,TransitionService:ud,UrlMatcher:Dc,UrlMatcherFactory:Ec,UrlRouter:Jc,UrlRuleFactory:Fc,BaseUrlRule:Hc,UrlService:Sc,ViewService:Kc,UIRouterGlobals:Lc,UIRouter:Uc,$q:wd,$injector:yd,BaseLocationServices:Hd,HashLocationService:Jd,MemoryLocationService:Ld,PushStateLocationService:Nd,MemoryLocationConfig:Od,BrowserLocationConfig:Pd,splitHash:Ad,splitQuery:Bd,splitEqual:Cd,trimHashVal:Dd,keyValsToObjectR:Ed,getParams:Fd,parseUrl:ma,buildUrl:Gd,locationPluginFactory:na,servicesPlugin:oa,hashLocationPlugin:Qd,pushStateLocationPlugin:Rd,memoryLocationPlugin:Sd,UIRouterPluginBase:Td}),Vd=angular,Wd=b&&b.module?b:Vd,Xd=function(a,b){return a.reduce(function(a,c){return a||Va(b[c])},!1)},Yd=0,Zd=function(){function a(a,b,c){var d=this;this.path=a,this.viewDecl=b,this.factory=c,this.$id=Yd++,this.loaded=!1,this.getTemplate=function(a,b){return d.component?d.factory.makeComponentTemplate(a,b,d.component,d.viewDecl.bindings):d.template}}return a.prototype.load=function(){var a=this,b=gb.$q,c=new kc(this.path),d=this.path.reduce(function(a,b){return nb(a,b.paramValues)},{}),e={template:b.when(this.factory.fromConfig(this.viewDecl,d,c)),controller:b.when(this.getController(c))};return b.all(e).then(function(b){return Tb.traceViewServiceEvent("Loaded",a),a.controller=b.controller,nb(a,b.template),a})},a.prototype.getController=function(a){var b=this.viewDecl.controllerProvider;if(!j(b))return this.viewDecl.controller;var c=gb.$injector.annotate(b),d=ab(b)?C(b):b;return new ec("",d,c).get(a)},a}(),$d=function(){function a(){var a=this;this._useHttp=Wd.version.minor<3,this.$get=["$http","$templateCache","$injector",function(b,c,d){return a.$templateRequest=d.has&&d.has("$templateRequest")&&d.get("$templateRequest"),a.$http=b,a.$templateCache=c,a}]}return a.prototype.useHttpService=function(a){this._useHttp=a;
},a.prototype.fromConfig=function(a,b,c){var d=function(a){return gb.$q.when(a).then(function(a){return{template:a}})},e=function(a){return gb.$q.when(a).then(function(a){return{component:a}})};return Va(a.template)?d(this.fromString(a.template,b)):Va(a.templateUrl)?d(this.fromUrl(a.templateUrl,b)):Va(a.templateProvider)?d(this.fromProvider(a.templateProvider,b,c)):Va(a.component)?e(a.component):Va(a.componentProvider)?e(this.fromComponentProvider(a.componentProvider,b,c)):d("<ui-view></ui-view>")},a.prototype.fromString=function(a,b){return Ya(a)?a(b):a},a.prototype.fromUrl=function(a,b){return Ya(a)&&(a=a(b)),null==a?null:this._useHttp?this.$http.get(a,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(a){return a.data}):this.$templateRequest(a)},a.prototype.fromProvider=function(a,b,c){var d=gb.$injector.annotate(a),e=ab(a)?C(a):a;return new ec("",e,d).get(c)},a.prototype.fromComponentProvider=function(a,b,c){var d=gb.$injector.annotate(a),e=ab(a)?C(a):a;return new ec("",e,d).get(c)},a.prototype.makeComponentTemplate=function(a,b,c,d){d=d||{};var e=Wd.version.minor>=3?"::":"",f=function(a){var b=U(a);return/^(x|data)-/.exec(b)?"x-"+b:b},g=function(c){var g=c.name,h=c.type,i=f(g);if(a.attr(i)&&!d[g])return i+"='"+a.attr(i)+"'";var j=d[g]||g;if("@"===h)return i+"='{{"+e+"$resolve."+j+"}}'";if("&"===h){var k=b.getResolvable(j),l=k&&k.data,m=l&&gb.$injector.annotate(l)||[];return i+"='$resolve."+j+(ab(l)?"["+(l.length-1)+"]":"")+"("+m.join(",")+")'"}return i+"='"+e+"$resolve."+j+"'"},h=ra(c).map(g).join(" "),i=f(c);return"<"+i+" "+h+"></"+i+">"},a}(),_d=function(a){return ae(_a(a.bindToController)?a.bindToController:a.scope)},ae=function(a){return Object.keys(a||{}).map(function(b){return[b,/^([=<@&])[?]?(.*)/.exec(a[b])]}).filter(function(a){return Va(a)&&ab(a[1])}).map(function(a){return{name:a[1][2]||a[0],type:a[1][1]}})},be=function(){function a(b,c){this.stateRegistry=b,this.stateService=c,m(Pa(a.prototype),this,Pa(this))}return a.prototype.decorator=function(a,b){return this.stateRegistry.decorator(a,b)||this},a.prototype.state=function(a,b){return _a(a)?b=a:b.name=a,this.stateRegistry.register(b),this},a.prototype.onInvalid=function(a){return this.stateService.onInvalid(a)},a}(),ce=function(a){return function(b,c){function d(a,b){var c=new kc(a.treeChanges(f)),d=nb(pe(c),{$state$:b,$transition$:a});return gb.$injector.invoke(e,this,d)}var e=b[a],f="onExit"===a?"from":"to";return e?d:void 0}},de=function(){function a(a){this._urlListeners=[],this.$locationProvider=a;var b=Pa(a);m(b,this,b,["hashPrefix"])}return a.prototype.dispose=function(){},a.prototype.onChange=function(a){var b=this;return this._urlListeners.push(a),function(){return rb(b._urlListeners)(a)}},a.prototype.html5Mode=function(){var a=this.$locationProvider.html5Mode();return(a=_a(a)?a.enabled:a)&&this.$sniffer.history},a.prototype.url=function(a,b,c){return void 0===b&&(b=!1),a&&this.$location.url(a),b&&this.$location.replace(),c&&this.$location.state(c),this.$location.url()},a.prototype._runtimeServices=function(a,b,c,d){var e=this;this.$location=b,this.$sniffer=c,a.$on("$locationChangeSuccess",function(a){return e._urlListeners.forEach(function(b){return b(a)})});var f=Pa(b),g=Pa(d);m(f,this,f,["replace","path","search","hash"]),m(f,this,f,["port","protocol","host"]),m(g,this,g,["baseHref"])},a.monkeyPatchPathParameterType=function(a){var b=a.urlMatcherFactory.type("path");b.encode=function(a){return null!=a?a.toString().replace(/(~|\/)/g,function(a){return{"~":"~~","/":"~2F"}[a]}):a},b.decode=function(a){return null!=a?a.toString().replace(/(~~|~2F)/g,function(a){return{"~~":"~","~2F":"/"}[a]}):a}},a}(),ee=function(){function a(a){this._router=a,this._urlRouter=a.urlRouter}return a.prototype.$get=function(){var a=this._urlRouter;return a.update(!0),a.interceptDeferred||a.listen(),a},a.prototype.rule=function(a){var b=this;if(!Ya(a))throw new Error("'rule' must be a function");var c=function(){return a(gb.$injector,b._router.locationService)},d=new Hc(c,k);return this._urlRouter.rule(d),this},a.prototype.otherwise=function(a){var b=this,c=this._urlRouter;if($a(a))c.otherwise(a);else{if(!Ya(a))throw new Error("'rule' must be a string or function");c.otherwise(function(){return a(gb.$injector,b._router.locationService)})}return this},a.prototype.when=function(b,c){return(ab(c)||Ya(c))&&(c=a.injectableHandler(this._router,c)),this._urlRouter.when(b,c),this},a.injectableHandler=function(a,b){return function(c){return gb.$injector.invoke(b,null,{$match:c,$stateParams:a.globals.params})}},a.prototype.deferIntercept=function(a){this._urlRouter.deferIntercept(a)},a}();Wd.module("ui.router.angular1",[]);var fe=Wd.module("ui.router.init",[]),ge=Wd.module("ui.router.util",["ng","ui.router.init"]),he=Wd.module("ui.router.router",["ui.router.util"]),ie=Wd.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),je=Wd.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),ke=(Wd.module("ui.router.compat",["ui.router"]),null);sa.$inject=["$locationProvider"];var le=function(a){return["$uiRouterProvider",function(b){var c=b.router[a];return c.$get=function(){return c},c}]};ta.$inject=["$injector","$q","$uiRouter"];var me=function(a){return a.urlRouterProvider=new ee(a)},ne=function(){return nb(ke.stateProvider,{$get:function(){return ke.stateService}})};ua.$inject=["$rootScope"],fe.provider("$uiRouter",sa),he.provider("$urlRouter",["$uiRouterProvider",me]),ge.provider("$urlService",le("urlService")),ge.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return ke.urlMatcherFactory}]),ge.provider("$templateFactory",function(){return new $d}),ie.provider("$stateRegistry",le("stateRegistry")),ie.provider("$uiRouterGlobals",le("globals")),ie.provider("$transitions",le("transitionService")),ie.provider("$state",["$uiRouterProvider",ne]),ie.factory("$stateParams",["$uiRouter",function(a){return a.globals.params}]),je.factory("$view",function(){return ke.viewService}),je.service("$trace",function(){return Tb}),je.run(ua),ge.run(["$urlMatcherFactory",function(a){}]),ie.run(["$state",function(a){}]),he.run(["$urlRouter",function(a){}]),fe.run(ta);var oe,pe=function(a){return a.getTokens().filter($a).map(function(b){var c=a.getResolvable(b);return[b,"NOWAIT"===a.getPolicy(c).async?c.promise:c.data]}).reduce(B,{})};oe=["$uiRouter","$timeout",function(a,b){var c=a.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){function h(){var a=n();l&&l(),k&&(l=k.$$addStateInfo(a.uiState,a.uiStateParams)),null!=a.href&&f.$set(j.attr,a.href)}var i,j=ya(e),k=g[1]||g[0],l=null,m={},n=function(){return xa(c,e,m)},o=va(f.uiSref);m.uiState=o.state,m.uiStateOpts=f.uiSrefOpts?d.$eval(f.uiSrefOpts):{},o.paramExpr&&(d.$watch(o.paramExpr,function(a){m.uiStateParams=nb({},a),h()},!0),m.uiStateParams=nb({},d.$eval(o.paramExpr))),h(),d.$on("$destroy",a.stateRegistry.onStatesChanged(h)),d.$on("$destroy",a.transitionService.onSuccess({},h)),j.clickable&&(i=za(e,c,b,j,n),Ba(e,d,i,m.uiStateOpts))}}}];var qe;qe=["$uiRouter","$timeout",function(a,b){var c=a.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){function h(){var a=o();m&&m(),k&&(m=k.$$addStateInfo(a.uiState,a.uiStateParams)),null!=a.href&&f.$set(j.attr,a.href)}var i,j=ya(e),k=g[1]||g[0],m=null,n={},o=function(){return xa(c,e,n)},p=["uiState","uiStateParams","uiStateOpts"],q=p.reduce(function(a,b){return a[b]=l,a},{});p.forEach(function(a){n[a]=f[a]?d.$eval(f[a]):null,f.$observe(a,function(b){q[a](),q[a]=d.$watch(b,function(b){n[a]=b,h()},!0)})}),h(),d.$on("$destroy",a.stateRegistry.onStatesChanged(h)),d.$on("$destroy",a.transitionService.onSuccess({},h)),j.clickable&&(i=za(e,c,b,j,o),Ba(e,d,i,n.uiStateOpts))}}}];var re;re=["$state","$stateParams","$interpolate","$uiRouter",function(a,b,c,d){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,b,e){function f(a){a.promise.then(h)}function g(a,c,d){var e=m.get(a,wa(b)),f={state:e||{name:a},params:c,activeClass:d};return l.push(f),function(){rb(l)(f)}}function h(){var c=function(a){return a.split(/\s/).filter(k)},d=function(a){return a.map(function(a){return a.activeClass}).map(c).reduce(zb,[])},e=d(l).concat(c(i)).reduce(Bb,[]),f=d(l.filter(function(a){return m.includes(a.state.name,a.params)})),g=!!l.filter(function(a){return m.is(a.state.name,a.params)}).length,h=g?c(i):[],j=f.concat(h).reduce(Bb,[]),n=e.filter(function(a){return!qb(j,a)});a.$evalAsync(function(){j.forEach(function(a){return b.addClass(a)}),n.forEach(function(a){return b.removeClass(a)})})}var i,j,l=[];i=c(e.uiSrefActiveEq||"",!1)(a);try{j=a.$eval(e.uiSrefActive)}catch(m){}j=j||c(e.uiSrefActive||"",!1)(a),_a(j)&&mb(j,function(b,c){if($a(b)){var d=va(b);g(d.state,a.$eval(d.paramExpr),c)}}),this.$$addStateInfo=function(a,b){if(!(_a(j)&&l.length>0)){var c=g(a,b,j);return h(),c}},a.$on("$stateChangeSuccess",h),a.$on("$destroy",d.transitionService.onStart({},f)),d.globals.transition&&f(d.globals.transition),h()}]}}],Wd.module("ui.router.state").directive("uiSref",oe).directive("uiSrefActive",re).directive("uiSrefActiveEq",re).directive("uiState",qe),Ca.$inject=["$state"],Da.$inject=["$state"],Wd.module("ui.router.state").filter("isState",Ca).filter("includedByState",Da);var se;se=["$view","$animate","$uiViewScroll","$interpolate","$q",function(a,b,c,d,e){function f(a,c){return{enter:function(a,c,d){Wd.version.minor>2?b.enter(a,null,c).then(d):b.enter(a,null,c,d)},leave:function(a,c){Wd.version.minor>2?b.leave(a).then(c):b.leave(a,c)}}}function g(a,b){return a===b}var h={$cfg:{viewDecl:{$context:a._pluginapi._rootViewContext()}},$uiView:{}},i={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(b,j,k){return function(b,j,l){function m(a){(!a||a instanceof Zd)&&(g(w,a)||(Tb.traceUIViewConfigUpdated(z,a&&a.viewDecl&&a.viewDecl.$context),w=a,o(a)))}function n(){if(p&&(Tb.traceUIViewEvent("Removing (previous) el",p.data("$uiView")),p.remove(),p=null),r&&(Tb.traceUIViewEvent("Destroying scope",z),r.$destroy(),r=null),q){var a=q.data("$uiViewAnim");Tb.traceUIViewEvent("Animate out",a),v.leave(q,function(){a.$$animLeave.resolve(),p=null}),p=q,q=null}}function o(a){var d=b.$new(),f=e.defer(),g=e.defer(),h={$cfg:a,$uiView:z},i={$animEnter:f.promise,$animLeave:g.promise,$$animLeave:g};d.$emit("$viewContentLoading",y);var l=k(d,function(a){a.data("$uiViewAnim",i),a.data("$uiView",h),v.enter(a,j,function(){f.resolve(),r&&r.$emit("$viewContentAnimationEnded"),(Va(u)&&!u||b.$eval(u))&&c(a)}),n()});q=l,r=d,r.$emit("$viewContentLoaded",a||w),r.$eval(t)}var p,q,r,s,t=l.onload||"",u=l.autoscroll,v=f(l,b),w=void 0,x=j.inheritedData("$uiView")||h,y=d(l.uiView||l.name||"")(b)||"$default",z={$type:"ng1",id:i.count++,name:y,fqn:x.$uiView.fqn?x.$uiView.fqn+"."+y:y,config:null,configUpdated:m,get creationContext(){var a=Ja("$cfg.viewDecl.$context")(x),b=Ja("$uiView.creationContext")(x);return a||b}};Tb.traceUIViewEvent("Linking",z),j.data("$uiView",{$uiView:z}),o(),s=a.registerUIView(z),b.$on("$destroy",function(){Tb.traceUIViewEvent("Destroying/Unregistering",z),s()})}}};return i}],Ea.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var te="function"==typeof Wd.module("ui.router").component,ue=0;Wd.module("ui.router.state").directive("uiView",se),Wd.module("ui.router.state").directive("uiView",Ea),Wd.module("ui.router.state").provider("$uiViewScroll",Ga),a.core=Ud,a["default"]="ui.router",a.fromJson=jb,a.toJson=kb,a.copy=lb,a.forEach=mb,a.extend=nb,a.equals=ob,a.identity=k,a.noop=l,a.createProxyFunctions=m,a.inherit=pb,a.inArray=qb,a._inArray=n,a.removeFrom=rb,a._removeFrom=o,a.pushTo=sb,a._pushTo=p,a.deregAll=tb,a.defaults=q,a.mergeR=ub,a.ancestors=r,a.pick=s,a.omit=t,a.pluck=u,a.filter=v,a.find=w,a.mapObj=vb,a.map=x,a.values=wb,a.allTrueR=xb,a.anyTrueR=yb,a.unnestR=zb,a.flattenR=Ab,a.pushR=y,a.uniqR=Bb,a.unnest=Cb,a.flatten=Db,a.assertPredicate=Eb,a.assertMap=Fb,a.assertFn=z,a.pairs=Gb,a.arrayTuples=A,a.applyPairs=B,a.tail=C,a._extend=F,a.sortBy=Hb,a.composeSort=Ib,a.silenceUncaughtInPromise=Jb,a.silentRejection=Kb,a.notImplemented=fb,a.services=gb,a.Glob=Qa,a.curry=c,a.compose=d,a.pipe=e,a.prop=Ha,a.propEq=Ia,a.parse=Ja,a.not=Ka,a.and=f,a.or=g,a.all=La,a.any=Ma,a.is=Na,a.eq=Oa,a.val=Pa,a.invoke=h,a.pattern=i,a.isUndefined=Ua,a.isDefined=Va,a.isNull=Wa,a.isNullOrUndefined=Xa,a.isFunction=Ya,a.isNumber=Za,a.isString=$a,a.isObject=_a,a.isArray=ab,a.isDate=bb,a.isRegExp=cb,a.isState=db,a.isInjectable=j,a.isPromise=eb,a.Queue=Lb,a.maxLength=S,a.padString=T,a.kebobString=U,a.functionToString=V,a.fnToString=W,a.stringify=X,a.beforeAfterSubstr=qc,a.splitOnDelim=Y,a.joinNeighborsR=Z,a.Trace=Sb,a.trace=Tb,a.Param=ac,a.ParamTypes=rc,a.StateParams=sc,a.ParamType=Zb,a.PathNode=bc,a.PathUtils=cc,a.resolvePolicies=fc,a.defaultResolvePolicy=dc,a.Resolvable=ec,a.NATIVE_INJECTOR_TOKEN=jc,a.ResolveContext=kc,a.resolvablesBuilder=da,a.StateBuilder=xc,a.StateObject=Ra,a.StateMatcher=yc,a.StateQueueManager=zc,a.StateRegistry=Ac,a.StateService=vd,a.TargetState=Ub,a.HookBuilder=Yb,a.matchState=K,a.RegisteredHook=Xb,a.makeEvent=L,a.Rejection=Nb,a.Transition=nc,a.TransitionHook=Wb,a.TransitionEventType=qd,a.defaultTransOpts=td,a.TransitionService=ud,a.UrlMatcher=Dc,a.UrlMatcherFactory=Ec,a.UrlRouter=Jc,a.UrlRuleFactory=Fc,a.BaseUrlRule=Hc,a.UrlService=Sc,a.ViewService=Kc,a.UIRouterGlobals=Lc,a.UIRouter=Uc,a.$q=wd,a.$injector=yd,a.BaseLocationServices=Hd,a.HashLocationService=Jd,a.MemoryLocationService=Ld,a.PushStateLocationService=Nd,a.MemoryLocationConfig=Od,a.BrowserLocationConfig=Pd,a.splitHash=Ad,a.splitQuery=Bd,a.splitEqual=Cd,a.trimHashVal=Dd,a.keyValsToObjectR=Ed,a.getParams=Fd,a.parseUrl=ma,a.buildUrl=Gd,a.locationPluginFactory=na,a.servicesPlugin=oa,a.hashLocationPlugin=Qd,a.pushStateLocationPlugin=Rd,a.memoryLocationPlugin=Sd,a.UIRouterPluginBase=Td,a.watchDigests=ua,a.getLocals=pe,a.getNg1ViewConfigFactory=pa,a.ng1ViewsBuilder=qa,a.Ng1ViewConfig=Zd,a.StateProvider=be,a.UrlRouterProvider=ee,Object.defineProperty(a,"__esModule",{value:!0})}),!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){if(k||(k=a.get("$animate")),c.cancel(m),!r){var e=b[0],g=e.querySelector?e.querySelector(n):b.find(n)[0];g||(g=e.getElementsByTagName("body")[0]);var h=angular.element(g),i=g.lastChild&&angular.element(g.lastChild);d.$broadcast("cfpLoadingBar:started"),r=!0,v&&k.enter(o,h,i),u&&k.enter(q,h,o),f(w)}}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,t&&(c.cancel(l),l=c(function(){g()},250))}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.autoIncrement,u=this.includeSpinner,v=this.includeBar,w=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="highcharts-ng"),function(){"use strict";function a(a,f){var g=0,h=this,i={},j={},k=h.changeDetection||angular.equals;this.$onInit=function(){h.config.getChartObj=function(){return h.chart},i=angular.merge({},h.config),j=b(a,h.config,g),h.chart=new(e[c(j)])(j);var d=a[0].clientWidth,k=a[0].clientHeight;f(function(){(a[0].clientWidth!==d||a[0].clientHeight!==k)&&h.chart.reflow()},0,!1)},this.$doCheck=function(){if(!k(h.config,i)){i=angular.merge({},h.config),j=b(a,h.config,g);var c=d(j.series,g);if(j.series){for(var e=h.chart.series.length-1;e>=0;e--){var f=h.chart.series[e];"highcharts-navigator-series"!==f.options.id&&c.indexOf(f.options.id)<0&&f.remove(!1)}angular.forEach(h.config.series,function(a){h.chart.get(a.id)||h.chart.addSeries(a)})}h.chart.update(j,!0)}},this.$onDestroy=function(){if(h.chart){try{h.chart.destroy()}catch(b){}f(function(){a.remove()},0)}}}function b(a,b,c){var e={},f={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{}};return b?(b.series&&d(b.series,c),e=angular.merge(f,b)):e=f,e.chart.renderTo=a[0],e}function c(a){return void 0===a||void 0===a.chartType?"Chart":f[(""+a.chartType).toLowerCase()]}function d(a,b){var c=[];return angular.forEach(a,function(a){angular.isDefined(a.id)||(a.id="series-"+b++),c.push(a.id)}),c}var e=null;window&&window.Highcharts?e=window.Highcharts:module&&"highcharts-ng"===module.exports&&(e=require("highcharts")),angular.module("highcharts-ng",[]).component("highchart",{bindings:{config:"<",changeDetection:"<"},controller:a}),a.$inject=["$element","$timeout"];var f={stock:"StockChart",map:"Map",chart:"Chart"}}(),!function(a,b){if("function"==typeof define&&define.amd)define(["module","exports","angular"],b);else if("undefined"!=typeof exports)b(module,exports,require("angular"));else{var c={exports:{}};b(c,c.exports,a.angular),a.infiniteScroll=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=d(c),f="infinite-scroll";e["default"].module(f,[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(a,b,c,d){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(f,g,h){function i(a){var b=a[0]||a;return isNaN(b.offsetHeight)?b.document.documentElement.clientHeight:b.offsetHeight}function j(a){var b=a[0]||a;return isNaN(window.pageYOffset)?b.document.documentElement.scrollTop:b.ownerDocument.defaultView.pageYOffset}function k(a){return a[0].getBoundingClientRect&&!a.css("none")?a[0].getBoundingClientRect().top+j(a):void 0}function l(){var b=void 0,d=void 0;if(y===u)b=i(y)+j(y[0].document.documentElement),d=k(g)+i(g);else{b=i(y);var e=0;void 0!==k(y)&&(e=k(y)),d=k(g)-e+i(g)}A&&(d=i((g[0].ownerDocument||g[0].document).documentElement));var h=d-b,l=h<=i(y)*v+1;l?(x=!0,w&&(f.$$phase||a.$$phase?f.infiniteScroll():f.$apply(f.infiniteScroll))):(C&&c.cancel(C),x=!1)}function m(a,b){function d(){return g=(new Date).getTime(),c.cancel(f),f=null,a.call()}function e(){var e=(new Date).getTime(),h=b-(e-g);0>=h?(c.cancel(f),f=null,g=e,a.call()):f||(f=c(d,h,1))}var f=null,g=0;return e}function n(){y.unbind("scroll",D),null!=B&&(B(),B=null),C&&c.cancel(C)}function o(a){v=parseFloat(a)||0}function p(a){w=!a,w&&x&&(x=!1,D())}function q(a){A=a}function r(a){null!=y&&y.unbind("scroll",D),y=a,null!=a&&y.bind("scroll",D)}function s(a){if(null!=a&&0!==a.length){var b=void 0;if(b=a.nodeType&&1===a.nodeType?e["default"].element(a):"function"==typeof a.append?e["default"].element(a[a.length-1]):"string"==typeof a?e["default"].element(document.querySelector(a)):a,null==b)throw new Error("invalid infinite-scroll-container attribute.");r(b)}}function t(){return z&&D(),c.cancel(C)}var u=e["default"].element(b),v=null,w=null,x=null,y=null,z=!0,A=!1,B=null,C=!1,D=null!=d?m(l,d):l;return f.$on("$destroy",n),f.$watch("infiniteScrollDistance",o),o(f.infiniteScrollDistance),f.$watch("infiniteScrollDisabled",p),p(f.infiniteScrollDisabled),f.$watch("infiniteScrollUseDocumentBottom",q),q(f.infiniteScrollUseDocumentBottom),r(u),f.infiniteScrollListenForEvent&&(B=a.$on(f.infiniteScrollListenForEvent,D)),f.$watch("infiniteScrollContainer",s),s(f.infiniteScrollContainer||[]),null!=h.infiniteScrollParent&&r(e["default"].element(g.parent())),null!=h.infiniteScrollImmediateCheck&&(z=f.$eval(h.infiniteScrollImmediateCheck)),C=c(t)}}}]),b["default"]=f,a.exports=b["default"]}),!function(){angular.module("angular-jwt",["angular-jwt.options","angular-jwt.interceptor","angular-jwt.jwt","angular-jwt.authManager"]),angular.module("angular-jwt.authManager",[]).provider("authManager",function(){this.$get=["$rootScope","$injector","$location","jwtHelper","jwtInterceptor","jwtOptions",function(a,b,c,d,e,f){function g(a){var c=null;return c=Array.isArray(a)?b.invoke(a,this,{options:null}):a()}function h(a){if(Array.isArray(a)||angular.isFunction(a))return b.invoke(a,o,{});throw new Error("unauthenticatedRedirector must be a function")}function i(){var a=g(o.tokenGetter);return a?!d.isTokenExpired(a):void 0}function j(){a.isAuthenticated=!0}function k(){a.isAuthenticated=!1}function l(){a.$on("$locationChangeStart",function(){var b=g(o.tokenGetter);b&&(d.isTokenExpired(b)?a.$broadcast("tokenHasExpired",b):j())})}function m(){a.$on("unauthenticated",function(){h(o.unauthenticatedRedirector),k()})}function n(a,b){if(!b)return!1;var c=b.$$route?b.$$route:b.data;if(c&&c.requiresLogin===!0){var e=g(o.tokenGetter);(!e||d.isTokenExpired(e))&&(a.preventDefault(),h(o.unauthenticatedRedirector))}}var o=f.getConfig();a.isAuthenticated=!1;var p=b.has("$state")?"$stateChangeStart":"$routeChangeStart";return a.$on(p,n),{authenticate:j,unauthenticate:k,getToken:function(){return g(o.tokenGetter)},redirect:function(){return h(o.unauthenticatedRedirector)},checkAuthOnRefresh:l,redirectWhenUnauthenticated:m,isAuthenticated:i}}]}),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.urlParam,this.authHeader,this.authPrefix,this.whiteListedDomains,this.tokenGetter;var a=this;this.$get=["$q","$injector","$rootScope","urlUtils","jwtOptions",function(b,c,d,e,f){function g(a){if(!e.isSameOrigin(a)&&!h.whiteListedDomains.length)throw new Error("As of v0.1.0, requests to domains other than the application's origin must be white listed. Use jwtOptionsProvider.config({ whiteListedDomains: [<domain>] }); to whitelist.");for(var b=e.urlResolve(a).hostname.toLowerCase(),c=0;c<h.whiteListedDomains.length;c++){var d=h.whiteListedDomains[c],f=d instanceof RegExp?d:new RegExp(d,"i");if(b.match(f))return!0}return e.isSameOrigin(a)?!0:!1}var h=angular.extend({},f.getConfig(),a);return{request:function(a){if(a.skipAuthorization||!g(a.url))return a;if(h.urlParam){if(a.params=a.params||{},a.params[h.urlParam])return a}else if(a.headers=a.headers||{},a.headers[h.authHeader])return a;var d=b.when(c.invoke(h.tokenGetter,this,{options:a}));return d.then(function(b){return b&&(h.urlParam?a.params[h.urlParam]=b:a.headers[h.authHeader]=h.authPrefix+b),a})},responseError:function(a){return 401===a.status&&d.$broadcast("unauthenticated",a),b.reject(a)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",["$window",function(a){this.urlBase64Decode=function(b){var c=b.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw"Illegal base64url string!"}return a.decodeURIComponent(escape(a.atob(c)))},this.decodeToken=function(a){var b=a.split(".");if(3!==b.length)throw new Error("JWT must have 3 parts");var c=this.urlBase64Decode(b[1]);if(!c)throw new Error("Cannot decode the token");return angular.fromJson(c)},this.getTokenExpirationDate=function(a){var b=this.decodeToken(a);if("undefined"==typeof b.exp)return null;var c=new Date(0);return c.setUTCSeconds(b.exp),c},this.isTokenExpired=function(a,b){var c=this.getTokenExpirationDate(a);return b=b||0,null===c?!1:!(c.valueOf()>(new Date).valueOf()+1e3*b)}}]),angular.module("angular-jwt.options",[]).provider("jwtOptions",function(){var a={};this.config=function(b){a=b},this.$get=function(){function b(){this.config=angular.extend({},c,a)}var c={urlParam:null,authHeader:"Authorization",authPrefix:"Bearer ",whiteListedDomains:[],tokenGetter:function(){return null},loginPath:"/",unauthenticatedRedirectPath:"/",unauthenticatedRedirector:["$location",function(a){a.path(this.unauthenticatedRedirectPath)}]};return b.prototype.getConfig=function(){return this.config},new b}}),angular.module("angular-jwt.interceptor").service("urlUtils",function(){function a(a){var b=a;return c.setAttribute("href",b),b=c.href,c.setAttribute("href",b),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname}}function b(b){var c=angular.isString(b)?a(b):b;return c.protocol===d.protocol&&c.host===d.host}var c=document.createElement("a"),d=a(window.location.href);return{urlResolve:a,isSameOrigin:b}})}();